<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Assembly and Estimation of Simple Multinomial Logit Models | A Self-Instructing Course in Mode Choice Modeling</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Assembly and Estimation of Simple Multinomial Logit Models | A Self-Instructing Course in Mode Choice Modeling" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Assembly and Estimation of Simple Multinomial Logit Models | A Self-Instructing Course in Mode Choice Modeling" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2021-05-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-multinomial-logit-model.html"/>
<link rel="next" href="specification-chapter.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Self-Instructing Course in Mode Choice Modeling</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#original-acknowledgements"><i class="fa fa-check"></i>Original Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-packages"><i class="fa fa-check"></i>R Packages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chapter1.html"><a href="chapter1.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="chapter1.html"><a href="chapter1.html#use-of-disaggregate-discrete-choice-models"><i class="fa fa-check"></i><b>1.2</b> Use of Disaggregate Discrete Choice Models</a></li>
<li class="chapter" data-level="1.3" data-path="chapter1.html"><a href="chapter1.html#application-context-in-current-course"><i class="fa fa-check"></i><b>1.3</b> Application Context in Current Course</a></li>
<li class="chapter" data-level="1.4" data-path="chapter1.html"><a href="chapter1.html#urban-and-intercity-travel-mode-choice-modeling"><i class="fa fa-check"></i><b>1.4</b> Urban and Intercity Travel Mode Choice Modeling</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="chapter1.html"><a href="chapter1.html#urban-travel-mode-choice-modeling"><i class="fa fa-check"></i><b>1.4.1</b> Urban Travel Mode Choice Modeling</a></li>
<li class="chapter" data-level="1.4.2" data-path="chapter1.html"><a href="chapter1.html#intercity-mode-choice-models"><i class="fa fa-check"></i><b>1.4.2</b> Intercity Mode Choice Models</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="chapter1.html"><a href="chapter1.html#description-of-the-course"><i class="fa fa-check"></i><b>1.5</b> Description of the Course</a></li>
<li class="chapter" data-level="1.6" data-path="chapter1.html"><a href="chapter1.html#organization-of-the-course-structure"><i class="fa fa-check"></i><b>1.6</b> Organization of the Course Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html"><i class="fa fa-check"></i><b>2</b> Elements of the Choice Decision Process</a>
<ul>
<li class="chapter" data-level="2.1" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html#the-decision-maker"><i class="fa fa-check"></i><b>2.2</b> The Decision Maker</a></li>
<li class="chapter" data-level="2.3" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html#the-alternatives"><i class="fa fa-check"></i><b>2.3</b> The Alternatives</a></li>
<li class="chapter" data-level="2.4" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html#attributes-of-alternatives"><i class="fa fa-check"></i><b>2.4</b> Attributes of Alternatives</a></li>
<li class="chapter" data-level="2.5" data-path="elements-of-the-choice-decision-process.html"><a href="elements-of-the-choice-decision-process.html#the-decision-rule"><i class="fa fa-check"></i><b>2.5</b> The Decision Rule</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html"><i class="fa fa-check"></i><b>3</b> Utility-based Choice Theory</a>
<ul>
<li class="chapter" data-level="3.1" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#basic-construct-of-utility-theory"><i class="fa fa-check"></i><b>3.1</b> Basic Construct of Utility Theory</a></li>
<li class="chapter" data-level="3.2" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#deterministic-choice-concepts"><i class="fa fa-check"></i><b>3.2</b> Deterministic Choice Concepts</a></li>
<li class="chapter" data-level="3.3" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#probabilistic-choice-theory"><i class="fa fa-check"></i><b>3.3</b> Probabilistic Choice Theory</a></li>
<li class="chapter" data-level="3.4" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#components-of-the-deterministic-portion-of-the-utility-function"><i class="fa fa-check"></i><b>3.4</b> Components of the Deterministic Portion of the Utility Function</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#utility-associated-with-the-attributes-of-alternatives"><i class="fa fa-check"></i><b>3.4.1</b> Utility Associated with the Attributes of Alternatives</a></li>
<li class="chapter" data-level="3.4.2" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#utility-biases-due-to-excluded-variables"><i class="fa fa-check"></i><b>3.4.2</b> Utility ‘Biases’ Due to Excluded Variables</a></li>
<li class="chapter" data-level="3.4.3" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#utility-related-to-the-characteristics-of-the-decision-maker"><i class="fa fa-check"></i><b>3.4.3</b> Utility Related to the Characteristics of the Decision Maker</a></li>
<li class="chapter" data-level="3.4.4" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#utility-defined-by-interactions-between-alternative-attributes-and-decision-maker-characteristics"><i class="fa fa-check"></i><b>3.4.4</b> Utility Defined by Interactions between Alternative Attributes and Decision Maker Characteristics</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="utility-based-choice-theory.html"><a href="utility-based-choice-theory.html#additive-error-term"><i class="fa fa-check"></i><b>3.5</b> Specification of the Additive Error Term</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html"><i class="fa fa-check"></i><b>4</b> The Multinomial Logit Model</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#overview-description-and-functional-form"><i class="fa fa-check"></i><b>4.1</b> Overview Description and Functional Form</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#the-sigmoid-or-s-shape-of-multinomial-logit-probabilities"><i class="fa fa-check"></i><b>4.1.1</b> The Sigmoid or S shape of Multinomial Logit Probabilities</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#the-equivalent-differences-property"><i class="fa fa-check"></i><b>4.1.2</b> The Equivalent Differences Property</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#IIA-section"><i class="fa fa-check"></i><b>4.2</b> Independence of Irrelevant Alternatives Property</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#bus-paradox"><i class="fa fa-check"></i><b>4.2.1</b> The Red Bus/Blue Bus Paradox</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#example-prediction-with-multinomial-logit-model"><i class="fa fa-check"></i><b>4.3</b> Example: Prediction with Multinomial Logit Model</a></li>
<li class="chapter" data-level="4.4" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#measures-of-response-to-changes-in-attributes-of-alternatives"><i class="fa fa-check"></i><b>4.4</b> Measures of Response to Changes in Attributes of Alternatives</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#derivatives-of-choice-probabilities"><i class="fa fa-check"></i><b>4.4.1</b> Derivatives of Choice Probabilities</a></li>
<li class="chapter" data-level="4.4.2" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#elasticities-of-choice-probabilities"><i class="fa fa-check"></i><b>4.4.2</b> Elasticities of Choice Probabilities</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#measures-of-responses-to-changes-in-decision-maker-characteristics"><i class="fa fa-check"></i><b>4.5</b> Measures of Responses to Changes in Decision Maker Characteristics</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#derivatives-of-choice-probabilities-1"><i class="fa fa-check"></i><b>4.5.1</b> Derivatives of Choice Probabilities</a></li>
<li class="chapter" data-level="4.5.2" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#elasticities-of-choice-probabilities-1"><i class="fa fa-check"></i><b>4.5.2</b> Elasticities of Choice Probabilities</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#model-estimation-concept-and-method"><i class="fa fa-check"></i><b>4.6</b> Model Estimation: Concept and Method</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#graphical-representation-of-model-estimation"><i class="fa fa-check"></i><b>4.6.1</b> Graphical Representation of Model Estimation</a></li>
<li class="chapter" data-level="4.6.2" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#maximum-likelihood-estimation-theory"><i class="fa fa-check"></i><b>4.6.2</b> Maximum Likelihood Estimation Theory</a></li>
<li class="chapter" data-level="4.6.3" data-path="the-multinomial-logit-model.html"><a href="the-multinomial-logit-model.html#example-of-maximum-likelihood-estimation"><i class="fa fa-check"></i><b>4.6.3</b> Example of Maximum Likelihood Estimation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="estimation-chapter.html"><a href="estimation-chapter.html"><i class="fa fa-check"></i><b>5</b> Data Assembly and Estimation of Simple Multinomial Logit Models</a>
<ul>
<li class="chapter" data-level="5.1" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-intro"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-data"><i class="fa fa-check"></i><b>5.2</b> Data Requirements Overview</a></li>
<li class="chapter" data-level="5.3" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-collection-methods-traveller"><i class="fa fa-check"></i><b>5.3</b> Sources and Methods for Traveler and Trip Related Data Collection</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-survey-types"><i class="fa fa-check"></i><b>5.3.1</b> Travel Survey Types</a></li>
<li class="chapter" data-level="5.3.2" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-survey-considerations"><i class="fa fa-check"></i><b>5.3.2</b> Sampling Design Considerations</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-collection-methods"><i class="fa fa-check"></i><b>5.4</b> Methods for Collecting Mode Related Data</a></li>
<li class="chapter" data-level="5.5" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-data-structure"><i class="fa fa-check"></i><b>5.5</b> Data Structure for Estimation</a></li>
<li class="chapter" data-level="5.6" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-sf-work-data"><i class="fa fa-check"></i><b>5.6</b> Application Data for Work Mode Choice in the San Francisco Bay Area</a></li>
<li class="chapter" data-level="5.7" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-basic"><i class="fa fa-check"></i><b>5.7</b> Estimation of MNL Model with Basic Specification</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="estimation-chapter.html"><a href="estimation-chapter.html#informal-tests"><i class="fa fa-check"></i><b>5.7.1</b> Informal Tests</a></li>
<li class="chapter" data-level="5.7.2" data-path="estimation-chapter.html"><a href="estimation-chapter.html#overall-goodness-of-fit-measures"><i class="fa fa-check"></i><b>5.7.2</b> Overall Goodness-of-Fit Measures</a></li>
<li class="chapter" data-level="5.7.3" data-path="estimation-chapter.html"><a href="estimation-chapter.html#statistical-tests"><i class="fa fa-check"></i><b>5.7.3</b> Statistical Tests</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="estimation-chapter.html"><a href="estimation-chapter.html#estimation-value-of-time"><i class="fa fa-check"></i><b>5.8</b> Value of Time</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="estimation-chapter.html"><a href="estimation-chapter.html#value-of-time-for-linear-utility-function"><i class="fa fa-check"></i><b>5.8.1</b> Value of Time for Linear Utility Function</a></li>
<li class="chapter" data-level="5.8.2" data-path="estimation-chapter.html"><a href="estimation-chapter.html#section5-8-2"><i class="fa fa-check"></i><b>5.8.2</b> Value of Time when Cost is Interacted with another Variable</a></li>
<li class="chapter" data-level="5.8.3" data-path="estimation-chapter.html"><a href="estimation-chapter.html#value-of-time-for-time-or-cost-transformation"><i class="fa fa-check"></i><b>5.8.3</b> Value of Time for Time or Cost Transformation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="specification-chapter.html"><a href="specification-chapter.html"><i class="fa fa-check"></i><b>6</b> Model Specification Refinement: San Francisco Bay Area Work Mode Choice</a>
<ul>
<li class="chapter" data-level="6.1" data-path="specification-chapter.html"><a href="specification-chapter.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="specification-chapter.html"><a href="specification-chapter.html#alternative-specifications"><i class="fa fa-check"></i><b>6.2</b> Alternative Specifications</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="specification-chapter.html"><a href="specification-chapter.html#refinement-of-specification-for-alternative-specific-income-effects"><i class="fa fa-check"></i><b>6.2.1</b> Refinement of Specification for Alternative Specific Income Effects</a></li>
<li class="chapter" data-level="6.2.2" data-path="specification-chapter.html"><a href="specification-chapter.html#different-specifications-of-travel-time"><i class="fa fa-check"></i><b>6.2.2</b> Different Specifications of Travel Time</a></li>
<li class="chapter" data-level="6.2.3" data-path="specification-chapter.html"><a href="specification-chapter.html#including-additinal-decision-maker-related-variables"><i class="fa fa-check"></i><b>6.2.3</b> Including Additinal Decision Maker Related Variables</a></li>
<li class="chapter" data-level="6.2.4" data-path="specification-chapter.html"><a href="specification-chapter.html#section6-2-4"><i class="fa fa-check"></i><b>6.2.4</b> Including Trip Context variables</a></li>
<li class="chapter" data-level="6.2.5" data-path="specification-chapter.html"><a href="specification-chapter.html#section6-2-5"><i class="fa fa-check"></i><b>6.2.5</b> Interactions between Trip maker and/or Context Characteristics and Mode Attributes</a></li>
<li class="chapter" data-level="6.2.6" data-path="specification-chapter.html"><a href="specification-chapter.html#additional-model-refinement"><i class="fa fa-check"></i><b>6.2.6</b> Additional Model Refinement</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="specification-chapter.html"><a href="specification-chapter.html#market-segmentation"><i class="fa fa-check"></i><b>6.3</b> Market Segmentation</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="specification-chapter.html"><a href="specification-chapter.html#market-segmentation-tests"><i class="fa fa-check"></i><b>6.3.1</b> Market Segmentation Tests</a></li>
<li class="chapter" data-level="6.3.2" data-path="specification-chapter.html"><a href="specification-chapter.html#market-segmentation-example"><i class="fa fa-check"></i><b>6.3.2</b> Market Segmentation Example</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="specification-chapter.html"><a href="specification-chapter.html#summary"><i class="fa fa-check"></i><b>6.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="other-purpose-chapter.html"><a href="other-purpose-chapter.html"><i class="fa fa-check"></i><b>7</b> San Francisco Bay Area Shop / Other Mode Choice</a>
<ul>
<li class="chapter" data-level="7.1" data-path="other-purpose-chapter.html"><a href="other-purpose-chapter.html#introduction-2"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="other-purpose-chapter.html"><a href="other-purpose-chapter.html#specification-for-shopother-mode-choice-model"><i class="fa fa-check"></i><b>7.2</b> Specification for Shop/Other Mode Choice Model</a></li>
<li class="chapter" data-level="7.3" data-path="other-purpose-chapter.html"><a href="other-purpose-chapter.html#initial-model-specification"><i class="fa fa-check"></i><b>7.3</b> Initial Model Specification</a></li>
<li class="chapter" data-level="7.4" data-path="other-purpose-chapter.html"><a href="other-purpose-chapter.html#exploring-alternative-specifications"><i class="fa fa-check"></i><b>7.4</b> Exploring Alternative Specifications</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html"><i class="fa fa-check"></i><b>8</b> Nested Logit Model</a>
<ul>
<li class="chapter" data-level="8.1" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#motivation"><i class="fa fa-check"></i><b>8.1</b> Motivation</a></li>
<li class="chapter" data-level="8.2" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#formulation-of-nested-logit-model"><i class="fa fa-check"></i><b>8.2</b> Formulation of Nested Logit Model</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#logsum-param"><i class="fa fa-check"></i><b>8.2.1</b> Interpretation of the Logsum Parameter</a></li>
<li class="chapter" data-level="8.2.2" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#disaggregate-direct-and-cross-elasticities"><i class="fa fa-check"></i><b>8.2.2</b> Disaggregate Direct and Cross-Elasticities</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#nesting-structures"><i class="fa fa-check"></i><b>8.3</b> Nesting Structures</a></li>
<li class="chapter" data-level="8.4" data-path="nestedlogit-chapter.html"><a href="nestedlogit-chapter.html#testing-NL-structures"><i class="fa fa-check"></i><b>8.4</b> Statistical Testing of Nested Logit Structures</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="nesting-selection-chapter.html"><a href="nesting-selection-chapter.html"><i class="fa fa-check"></i><b>9</b> Selecting a Preferred Nesting Structure</a>
<ul>
<li class="chapter" data-level="9.1" data-path="nesting-selection-chapter.html"><a href="nesting-selection-chapter.html#introduction-3"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="nesting-selection-chapter.html"><a href="nesting-selection-chapter.html#nested-models-for-work-trips"><i class="fa fa-check"></i><b>9.2</b> Nested Models for Work Trips</a></li>
<li class="chapter" data-level="9.3" data-path="nesting-selection-chapter.html"><a href="nesting-selection-chapter.html#nested-models-for-shop-other-trips"><i class="fa fa-check"></i><b>9.3</b> Nested Models for Shop / Other Trips</a></li>
<li class="chapter" data-level="9.4" data-path="nesting-selection-chapter.html"><a href="nesting-selection-chapter.html#practical-issues-and-implications"><i class="fa fa-check"></i><b>9.4</b> Practical Issues and Implications</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="multiple-maxima-in-nested-logit-estimation-nesting-optima-chapter.html"><a href="multiple-maxima-in-nested-logit-estimation-nesting-optima-chapter.html"><i class="fa fa-check"></i><b>10</b> Multiple Maxima in Nested Logit Estimation (#nesting-optima-chapter)</a></li>
<li class="chapter" data-level="11" data-path="aggregate-forecasting-assessment-and-application.html"><a href="aggregate-forecasting-assessment-and-application.html"><i class="fa fa-check"></i><b>11</b> Aggregate Forecasting Assessment, and Application</a>
<ul>
<li class="chapter" data-level="11.1" data-path="aggregate-forecasting-assessment-and-application.html"><a href="aggregate-forecasting-assessment-and-application.html#background-1"><i class="fa fa-check"></i><b>11.1</b> Background</a></li>
<li class="chapter" data-level="11.2" data-path="aggregate-forecasting-assessment-and-application.html"><a href="aggregate-forecasting-assessment-and-application.html#aggregate-forecasting"><i class="fa fa-check"></i><b>11.2</b> Aggregate Forecasting</a></li>
<li class="chapter" data-level="11.3" data-path="aggregate-forecasting-assessment-and-application.html"><a href="aggregate-forecasting-assessment-and-application.html#aggregate-assessment-of-travel-mode-choice-models"><i class="fa fa-check"></i><b>11.3</b> Aggregate Assessment of Travel Mode Choice Models</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="recent-advances-in-discrete-choice-modeling.html"><a href="recent-advances-in-discrete-choice-modeling.html"><i class="fa fa-check"></i><b>12</b> Recent Advances in Discrete Choice Modeling</a>
<ul>
<li class="chapter" data-level="12.1" data-path="recent-advances-in-discrete-choice-modeling.html"><a href="recent-advances-in-discrete-choice-modeling.html#the-gev-class-of-models"><i class="fa fa-check"></i><b>12.1</b> The GEV Class of Models</a></li>
<li class="chapter" data-level="12.2" data-path="recent-advances-in-discrete-choice-modeling.html"><a href="recent-advances-in-discrete-choice-modeling.html#the-mmnl-class-of-models"><i class="fa fa-check"></i><b>12.2</b> The MMNL Class of Models</a></li>
<li class="chapter" data-level="12.3" data-path="recent-advances-in-discrete-choice-modeling.html"><a href="recent-advances-in-discrete-choice-modeling.html#the-mixed-gev-class-of-models"><i class="fa fa-check"></i><b>12.3</b> The Mixed GEV Class of Models</a></li>
<li class="chapter" data-level="12.4" data-path="recent-advances-in-discrete-choice-modeling.html"><a href="recent-advances-in-discrete-choice-modeling.html#summary-1"><i class="fa fa-check"></i><b>12.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Self-Instructing Course in Mode Choice Modeling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="estimation-chapter" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Assembly and Estimation of Simple Multinomial Logit Models</h1>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="estimation-chapter.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># packages used in this chapter</span></span>
<span id="cb27-2"><a href="estimation-chapter.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># general data munging</span></span>
<span id="cb27-3"><a href="estimation-chapter.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven) <span class="co"># read spss data into R</span></span>
<span id="cb27-4"><a href="estimation-chapter.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlogit) <span class="co"># multinomial logit estimation</span></span>
<span id="cb27-5"><a href="estimation-chapter.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary) <span class="co"># pretty tables</span></span>
<span id="cb27-6"><a href="estimation-chapter.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)   <span class="co"># pretty tables</span></span>
<span id="cb27-7"><a href="estimation-chapter.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled) <span class="co"># point labels</span></span>
<span id="cb27-8"><a href="estimation-chapter.html#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="estimation-chapter.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># helping with book creation</span></span>
<span id="cb27-10"><a href="estimation-chapter.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb27-11"><a href="estimation-chapter.html#cb27-11" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">cache =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div id="estimation-intro" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p>This chapter describes the estimation of basic specifications for the multinomial logit (MNL) model including the collection and organization of data required for model estimation. The chapter is organized as follows: Section <a href="estimation-chapter.html#estimation-data">5.2</a> presents an overview of the data required to estimate mode choice models.
Section <a href="estimation-chapter.html#estimation-collection-methods-traveller">5.3</a> reviews data collection approaches for obtaining traveler and trip-related data. Section <a href="estimation-chapter.html#estimation-collection-methods">5.4</a> discusses the methods for collecting data which
describes the availability and service characteristics of the various modal alternatives. Section <a href="estimation-chapter.html#estimation-data-structure">5.5</a> illustrates two different data structures used by
software packages for estimation of MNL and NL models. Section <a href="estimation-chapter.html#estimation-sf-work-data">5.6</a> describes the data used to estimate work mode choice model in the San Francisco Bay Region. Section <a href="estimation-chapter.html#estimation-basic">5.7</a> describes preliminary estimation results for mode choice to work based on this data and interpret these results in terms of judgment, descriptive measures and statistical tests. Section <a href="estimation-chapter.html#estimation-value-of-time">5.8</a> goes into more detail on value of time estimates retrieved from choice models. <a href="specification-chapter.html#specification-chapter">CHAPTER 6</a> extends this example to the estimation of more sophisticated models. <a href="other-purpose-chapter.html#other-purpose-chapter">CHAPTER 7</a> develops a parallel example for shop/other mode choice in the San Francisco Bay Region. <a href="nesting-selection-chapter.html#nesting-selection-chapter">CHAPTER 9</a> extends the examples from previous chapters and explores nested logit models for work and shop/other trips in the San Francisco Bay Region. Additional examples based on data collected in different urban regions are presented in the appendices.</p>
</div>
<div id="estimation-data" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Data Requirements Overview</h2>
<p>The first step in the development of a choice model is to assemble data about traveler choice and the variables believed to influence that choice process. In the context of travel mode choice, such data include:</p>
<ul>
<li>Traveler and trip related variables that influence the travelers’ assessment of modal alternatives (<em>e.g.</em>, income, automobile ownership, trip purpose, time of day of travel, origin and destination of trip, and travel party size),</li>
<li>Mode related variables describing each alternative available to the traveler (e.g., travel time, travel cost and service frequency for carrier modes) and</li>
<li>The observed or reported mode choice of the traveler (the “dependent” or “endogenous” variable).</li>
</ul>
<p>The first two categories of variables are selected to describe the factors which influence each decision maker’s choice of an alternative. These independent or exogenous variables are likely to differ across trip purpose. The commonly used explanatory variables in mode choice models include:</p>
<p>Traveler (Decision Maker) Related Variables:</p>
<ul>
<li>Income of traveler or traveler’s household,</li>
<li>Number of automobiles in traveler’s household,</li>
<li>Number of workers in traveler’s household,</li>
<li>Sex of the traveler,</li>
<li>Age group of the traveler,</li>
<li>Functions of these variables such as number of autos divided by number of workers</li>
</ul>
<p>Trip Context Variables:</p>
<ul>
<li>Trip purpose,</li>
<li>Employment density at the traveler’s workplace,</li>
<li>Population density at the home location and</li>
<li>Dummy variable indicating whether the traveler’s workplace is in the Central Business District (CBD).</li>
</ul>
<p>Mode (Alternative) Related Variables:</p>
<ul>
<li>Total travel time,<br />
</li>
<li>In-vehicle travel time,</li>
<li>Out-of-vehicle travel time,</li>
<li>Walk time,</li>
<li>Wait time,</li>
<li>Number of transfers</li>
<li>Transit headway and</li>
<li>Travel cost.</li>
</ul>
<p>Interaction of Mode and Traveler or Trip Related Variables:</p>
<ul>
<li>Travel cost divided by household income,</li>
<li>Travel time or cost interacted with sex or age group of traveler, and</li>
<li>Out-of-vehicle time divided by total trip distance.</li>
</ul>
</div>
<div id="estimation-collection-methods-traveller" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Sources and Methods for Traveler and Trip Related Data Collection</h2>
<p>Traveler and trip related data (including the actual mode choice of the traveler) needed for estimation of mode choice models are generally obtained by surveying a sample of travelers from the population of interest. This section discusses the types of surveys that may be used to obtain traveler and/or trip-related information (Section <a href="estimation-chapter.html#estimation-survey-types">5.3.1</a>) and associated sample design considerations (Section <a href="estimation-chapter.html#estimation-survey-considerations">5.3.2</a>).</p>
<div id="estimation-survey-types" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Travel Survey Types</h3>
<p>There are several types of travel surveys. The most common of these are household, workplace and intercept surveys.</p>
<p><strong>Household Travel Surveys</strong> involve contacting respondents in their home and collecting information regarding their household characteristics (<em>e.g.</em>, number of members in household, automobile ownership, <em>etc</em>.), their personal characteristics (such as income, work status, <em>etc</em>.) and the travel decisions made in the recent past (<em>e.g.</em>, number of trips, mode of travel for each trip, <em>etc</em>.). Historically, most household traveler surveys were conducted through personal interviews in the respondent’s home. Currently, most household travel surveys are conducted using telephone or mail-back surveys, or a combination of both. It is common practice to include travel diaries as a part of the household travel survey. Travel diaries are a daily log of all trips (including information about trip origin and destination, start and end time, mode of travel, purpose at the origin and destination, <em>etc</em>.) made by each household member during a specified time period. This information is used to develop trip generation, trip distribution, and mode choice models for various trip purposes. Recently, travel diaries have been extended to include detailed information about the activities engaged in at each stop location and at home to provide a better understanding of the motivation for each trip and to associate trips of different purposes with different members of the household. Also, in some cases, diaries have been collected repeatedly from the same ‘panel’ of respondents to understand changes in their behavior over time.</p>
<p><strong>Workplace Surveys</strong> involve contacting respondents at their workplace. The information collected is similar to that for household surveys but focuses exclusively on the traveler working at that location and on his/her work and work-related trips. Such surveys are of particular interest in understanding work commute patterns of individuals and in designing alternative commuter services.</p>
<p><strong>Destination Surveys</strong> involve contacting respondents at other destinations. Similar information is collected as for workplace surveys but the objective is to learn more about travel to other types of destinations and possibly to develop transportation services which better serve such destinations.</p>
<p><strong>Intercept Surveys</strong> “intercept” potential respondents during their travel. The emphasis of the survey is on collecting information about the specific trip being undertaken by the traveler. Intercept surveys are commonly used for intercity travel studies due to the high cost of identifying intercity travelers through home-based or work-based surveys. In intercept surveys, travelers are intercepted at a roadside rest area for highway travel and on board carriers (or at carrier terminals) for other modes of travel. The traveler is usually given a brief survey (paper or interview) for immediate completion or future response and/or recruited for a future phone survey. A variant of highway intercept surveys is to record the license plate of vehicles and subsequently contact the owners of a sample of vehicles to obtain information on the trip that was observed. Intercept surveys can be used to cover all available modes or they can be used to enrich a household or workplace survey sample by providing additional observations for users of infrequently used modes since few such users are likely to be identified through household or workplace surveys.</p>
</div>
<div id="estimation-survey-considerations" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Sampling Design Considerations</h3>
<p>The first issue to consider in sample design is the population of interest in the study. Obviously, the population of interest will depend on the purpose of the study. In the context of urban work mode choice analysis, the population of interest would be all commuters in the urban region. In the context of non-business intercity mode choice, the population of interest would be all non-business intercity travelers in the relevant corridor. However, most surveys are designed to addresses a number of current or potential analysis and decision issues. Thus, the population of interest is selected based on the full range of such issues and is likely to include a wide range of households and household members each undertaking a variety of trips.</p>
<p>After identifying the population of interest, the next step in sample design is to determine the unit for sampling. The sampling units should be mutually exclusive and collectively exhaust the population. Thus, if the population of interest is commuters in an urban region, the sampling unit could be firms in the area (whose employees collectively represent the commuting population). Within each firm, all or a sample of workers could be interviewed. However, if the survey is addressed to multiple urban travel issues, the population of interest is likely to be all individuals or households resident in the urban region. A comprehensive list of all sampling units constitutes the sampling frame. This may be a directory of firms or households obtained from a combination of public and private sources such as local or regional commerce departments, business directories, tourism offices, utilities, <em>etc</em>. Of course, the sampling frame may not always completely represent the population of interest. For example, some commuters may be employed by firms outside the urban region and some households may not have telephones or other utility connections.</p>
<p>Once the sampling frame is determined, a sampling design is used to select a sample of cases. The most common class of sampling procedures is probability sampling, where each sampling unit has a pre-determined probability of being selected into the survey sample.</p>
<p>A probability sampling procedure in which each sampling unit has an equal probability of being selected is simple random sampling. In this method, the sampling units are selected randomly from the sampling frame. This would apply to household sampling, for example. An alternative approach for work place sampling would be to sample each employer to further sample workers for those employers sampled. This is referred to as a two-stage sample. In either case, the result is an unbiased sample which is representative of the population of interest. Simple random sampling offers the advantage of being easy to understand, communicate, and implement in the field, making it less prone to errors. However, a random sample may not adequately represent some population segments of interest.</p>
<p>This problem can be addressed by using stratified random sampling. This entails partitioning the sampling frame into several mutually exclusive and collectively exhaustive segments (or strata) based on one or more stratification variables, followed by random sampling within each stratum. Thus, households in a region may be stratified by location within the region; city vs. suburban residence; or income. Similarly, employment firms in a region may be stratified by the number of employees or the type of business. Stratified random sampling may be useful in cases where it is important to understand the characteristics of certain subpopulations as well as the overall population. For example, it might be useful to study the mode choice behavior of employees working for very small employers in a region and compare their behavior with those of employees working for large employers. But if the number of small employers in a region is a small proportion of all employers, they may not be well-represented in a simple random sample. In such a case, the analyst might stratify the sampling frame to ensure adequate representation of very small employers in the survey sample. Stratified random sampling can also be less expensive than simple random sampling. This can occur, for example, because per-person sampling is less expensive if a few large employers are targeted rather than several smaller ones. Finally, increased dispersion in the range of important independent variables can be increased through “clever” identification of alternative strata based on income, household size, number of vehicles owned or number of workers providing benefits in estimation efficiency.</p>
<p>The use of stratified random sampling does not present any new problems in estimation as long as the stratification variable(s) is (are) exogenous to the choice process. However, in some situations, one may want to use the discrete choice of interest (the dependent or endogenous variable) as the stratification variable. For example, if the bus mode is rarely chosen for urban or intercity travel, a random sampling procedure or even an exogenously stratified sample might not provide sufficient observations of bus riders to understand the factors that affect the choice of the bus mode. In this case, bus riders can be intentionally over sampled by interviewing them at bus stops or on board the buses. Such choice based sampling may also be motivated by cost considerations. Special techniques are required to estimate model parameters using choice based sampling methods.</p>
<p>A further problem is that it may be difficult to obtain a random sample as it may not be possible to get an up to date and complete list of potential respondents from which to select a sample. This is the primary reason for using “deterministic rules” of sampling. In systematic sampling, sample units are drawn by deterministic rather than random rules. For example, rather than drawing a random sample of 5 percent all households in a region from a published directory, a systematic sampling plan may pick out every 20th household in the directory. As long as there is no inherent bias in setting up the deterministic rule, the systematic sampling plan is essentially equivalent to random sampling, and the choice of one over the other may be a matter of operational convenience.</p>
<p>In addition to the sampling approaches discussed above, combinations of the approaches can also be used. For example, enriched sampling uses a combination of household or workplace sampling with choice based sampling to increase the number of transit users in the study data. As with choice based sampling, special estimation techniques are required to offset the biases associated with this sampling approach.</p>
<p>Another issue in survey sampling is the sample size to be used. The size of the sample required to adequately represent the population is a function of the level of statistical accuracy and confidence desired from the survey. The precision of parameter estimates and the statistical validity of estimation results improve with sample size. However, the cost of the survey also increases with sample size and in many cases it is necessary to restrict the sample size to ensure that the cost of the survey remains within budgetary constraints. The decision about sample size requires a careful evaluation of the need for adequate data to satisfy study objectives <em>vis-à-vis</em> budgetary constraints. Interested readers are referred to <span class="citation"><a href="#ref-benakivalerman1985" role="doc-biblioref">M. Ben-Akiva and Lerman</a> (<a href="#ref-benakivalerman1985" role="doc-biblioref">1985</a>)</span> or <span class="citation"><a href="#ref-borschsupan1987" role="doc-biblioref">Börsch-Supan</a> (<a href="#ref-borschsupan1987" role="doc-biblioref">1987</a>)</span> for a more comprehensive discussion of sampling methods and sample size issues.</p>
</div>
</div>
<div id="estimation-collection-methods" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Methods for Collecting Mode Related Data</h2>
<p>Surveys can be used to collect information describing the trip maker and his or her household, the context of the trip (purpose, time of day, frequency of travel, origin, and destination), the chosen mode and the respondent’s perception of travel service. However, objective data about modal service (mode availability and level of service) must be obtained from other sources. Modal data is usually generated from simulation of network service characteristics including carrier schedules and fare and observed volumes, travel times and tolls on roadway links.</p>
<p>Network analysis provides the zone-to-zone in-vehicle travel times for the highway (non-transit) and transit modes (the urban area is divided into several traffic analysis zones for travel demand analysis purposes). The highway out-of-vehicle time by the highway mode is assigned a nominal value to reflect walk access/egress to/from the car. The transit out-of-vehicle time is based on transit schedules, the presence or absence of transfers, and location of bus stops vis-à-vis origin and destination locations. The highway distance of travel is obtained from the network structure and a per-mile vehicle operation cost is applied to obtain highway zone-to-zone driving costs. Parking costs are obtained from per-hour parking rates at the destination zone multiplied by half the estimated duration of the activity pursued at the destination zone (allowing half the parking cost to be charged to the incoming and departing trips) and toll costs can be identified from the network. Transit cost is determined from the actual fare for travel between zones plus any access costs to/from the transit station from/to the origin/destination. The highway in-vehicle times, out-of-vehicle times, and costs are used as the relevant values for driving alone and these values are modified appropriately to reflect increased in-vehicle times and decreased driving/parking costs for the shared ride modes. The travel times for non-motorized modes (such as bike and walk) are obtained from the zone-to-zone distance and an assumed walk/bike speed. Finally, the appropriate travel times and cost between zones is appended to each trip in the trip file based on the origin and destination zones of the trip.</p>
</div>
<div id="estimation-data-structure" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Data Structure for Estimation</h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="estimation-chapter.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in raw SPSS file</span></span>
<span id="cb28-2"><a href="estimation-chapter.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb28-3"><a href="estimation-chapter.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># We received the work mode choice dataset from Laurie Garrow, who had converted</span></span>
<span id="cb28-4"><a href="estimation-chapter.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the file into a labeled SPSS data object. This code reads the file into R</span></span>
<span id="cb28-5"><a href="estimation-chapter.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># using the haven::read_spss function, and then creates a new alternative column</span></span>
<span id="cb28-6"><a href="estimation-chapter.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># as the label of the alternative number</span></span>
<span id="cb28-7"><a href="estimation-chapter.html#cb28-7" aria-hidden="true" tabindex="-1"></a>sf_work_mode <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="st">&quot;data-raw/Work Trips/SPSS/SF MTC Work MC Data NewVars.sav&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="estimation-chapter.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">altname =</span> <span class="fu">as_factor</span>(altnum, <span class="at">levels =</span> <span class="st">&quot;labels&quot;</span>))</span>
<span id="cb28-9"><a href="estimation-chapter.html#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="estimation-chapter.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert into mlogit dfidx data frame</span></span>
<span id="cb28-11"><a href="estimation-chapter.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co"># mlogit requires instructions on which rows are the alternative, and which rows</span></span>
<span id="cb28-12"><a href="estimation-chapter.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co"># are the cases. This dataset is in IDCase-ALT format</span></span>
<span id="cb28-13"><a href="estimation-chapter.html#cb28-13" aria-hidden="true" tabindex="-1"></a>sf_mlogit <span class="ot">&lt;-</span> <span class="fu">dfidx</span>(sf_work_mode, <span class="at">idx =</span> <span class="fu">c</span>(<span class="st">&quot;case&quot;</span>, <span class="st">&quot;altname&quot;</span>))</span>
<span id="cb28-14"><a href="estimation-chapter.html#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="estimation-chapter.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># write to data/ folder for future use</span></span>
<span id="cb28-16"><a href="estimation-chapter.html#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(sf_mlogit, <span class="st">&quot;data/worktrips.rds&quot;</span>)</span></code></pre></div>
<p>The data collected from the various sources described in the previous sections
must be assembled into a single data set to support model estimation. This can
be accomplished using a variety of spreadsheet, data base, statistical software
or user prepared programs. The structure of the resultant data files must
satisfy the format requirements of the software packages designed for choice
model estimation. The commonly used software packages for discrete choice model
estimation require the data to be structured in one of two formats: a) the trip
format or b) the trip-alternative format. This are commonly referred to as
IDCase (each record contains all the information for mode choice over
alternatives for a single trip) or IDCase-IDAlt (each record contains all the
information for a single mode available to each trip maker so there is one
record for each mode for each trip).</p>
<p>In the trip format, each record provides all the relevant information about an
individual trip, including the traveler/trip related variables, mode related
variables for all available modes and a variable indicating which alternative
was chosen. In the trip-alternative format, each record includes information on
the traveler/trip related variables, the attributes of that modal alternative,
and a choice variable that indicates whether the alternative was or was not
chosen.<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></p>
<p>The two data structures are illustrated in Tables <a href="estimation-chapter.html#tab:trip-alt">5.1</a> and <a href="estimation-chapter.html#tab:trip">5.2</a>
for four observations
(individuals) with up to three modal alternatives available. The first columns
in both formats is the household and person ID value. In the trip (or IDCase) format, this is
followed by traveler/trip related variables (e.g., income), the level of service
(time and cost in the figure) variables associated with each alternative and a
variable that indicates the chosen alternative. In the trip-alternative (or
IDCase-IDAlt) format, the second column generally identifies the alternative
number with which that record is associated. Additional columns will generally
include a 0-1 variable indicating the chosen alternative,<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> the number
of alternatives available, traveler/trip related variables mode related
attributes for the alternative with which the record is associated.</p>
<p>The unavailability of an alternative is indicated in the trip format by zeros
Either of the two data formats may be used to represent the information required
for model estimation. The choice is based on the programming decisions of the
software developer taking into account data storage and computational
implications of each choice.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="estimation-chapter.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#trip-alt</span></span>
<span id="cb29-2"><a href="estimation-chapter.html#cb29-2" aria-hidden="true" tabindex="-1"></a>trip_alt <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="estimation-chapter.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(case <span class="sc">&lt;=</span> <span class="dv">4</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="estimation-chapter.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, <span class="at">Alternative =</span> altname, chosen, <span class="at">IVTT =</span> ivtt, <span class="at">Income =</span> hhinc) </span>
<span id="cb29-5"><a href="estimation-chapter.html#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="estimation-chapter.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(trip_alt, <span class="at">caption=</span> <span class="st">&quot;Data Layout Type II: Trip-Alternative Format&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="estimation-chapter.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:trip-alt">Table 5.1: </span>Data Layout Type II: Trip-Alternative Format
</caption>
<thead>
<tr>
<th style="text-align:right;">
hhid
</th>
<th style="text-align:right;">
perid
</th>
<th style="text-align:left;">
Alternative
</th>
<th style="text-align:right;">
chosen
</th>
<th style="text-align:right;">
IVTT
</th>
<th style="text-align:right;">
Income
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
13.38
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
18.38
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 3+
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20.38
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
25.90
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Bike
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
40.50
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
29.92
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34.92
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 3+
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
21.92
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
22.96
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Bike
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
58.95
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8.60
</td>
<td style="text-align:right;">
12.5
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13.60
</td>
<td style="text-align:right;">
12.5
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 3+
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15.60
</td>
<td style="text-align:right;">
12.5
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
16.87
</td>
<td style="text-align:right;">
12.5
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30.60
</td>
<td style="text-align:right;">
55.0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
35.70
</td>
<td style="text-align:right;">
55.0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Share ride 3+
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
22.70
</td>
<td style="text-align:right;">
55.0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
24.27
</td>
<td style="text-align:right;">
55.0
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="estimation-chapter.html#cb30-1" aria-hidden="true" tabindex="-1"></a>trip_format <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="estimation-chapter.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(case <span class="sc">&lt;=</span> <span class="dv">4</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="estimation-chapter.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, chosen, ivtt, <span class="at">Income =</span> hhinc, altname, altnum) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="estimation-chapter.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hhid, perid) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="estimation-chapter.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">chosen =</span> altname[<span class="fu">which</span>(chosen <span class="sc">==</span> <span class="dv">1</span>)], <span class="at">altname =</span> <span class="fu">str_c</span>(altname, <span class="st">&quot; - Travel Time&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="estimation-chapter.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>altnum) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="estimation-chapter.html#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(altname, ivtt, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb30-8"><a href="estimation-chapter.html#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="estimation-chapter.html#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(<span class="fu">head</span>(trip_format), <span class="at">caption=</span> <span class="st">&quot;Data Layout Type I: Trip Format&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-10"><a href="estimation-chapter.html#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:trip">Table 5.2: </span>Data Layout Type I: Trip Format
</caption>
<thead>
<tr>
<th style="text-align:right;">
hhid
</th>
<th style="text-align:right;">
perid
</th>
<th style="text-align:left;">
chosen
</th>
<th style="text-align:right;">
Income
</th>
<th style="text-align:right;">
Bike - Travel Time
</th>
<th style="text-align:right;">
Drive alone - Travel Time
</th>
<th style="text-align:right;">
Share ride 2 - Travel Time
</th>
<th style="text-align:right;">
Share ride 3+ - Travel Time
</th>
<th style="text-align:right;">
Transit - Travel Time
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
42.5
</td>
<td style="text-align:right;">
40.50
</td>
<td style="text-align:right;">
13.38
</td>
<td style="text-align:right;">
18.38
</td>
<td style="text-align:right;">
20.38
</td>
<td style="text-align:right;">
25.90
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
17.5
</td>
<td style="text-align:right;">
58.95
</td>
<td style="text-align:right;">
29.92
</td>
<td style="text-align:right;">
34.92
</td>
<td style="text-align:right;">
21.92
</td>
<td style="text-align:right;">
22.96
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Drive alone
</td>
<td style="text-align:right;">
12.5
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
8.60
</td>
<td style="text-align:right;">
13.60
</td>
<td style="text-align:right;">
15.60
</td>
<td style="text-align:right;">
16.87
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Transit
</td>
<td style="text-align:right;">
55.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
30.60
</td>
<td style="text-align:right;">
35.70
</td>
<td style="text-align:right;">
22.70
</td>
<td style="text-align:right;">
24.27
</td>
</tr>
</tbody>
</table>
</div>
<div id="estimation-sf-work-data" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Application Data for Work Mode Choice in the San Francisco Bay Area</h2>
<p>The examples used in previous chapters are based on simulated or hypothetical data to highlight fundamental concepts of multinomial logit choice models. Henceforth, our discussion of model specification and interpretation of results will be based on application data sets assembled from travel survey and other data collection to support transportation decision making in selected urban regions. Use of real data provides richer examples and “hands-on” experience in estimating mode choice models. The data used in this chapter was collected for the analysis of work trip mode choice in the San Francisco Bay Area in 1990.</p>
<p>The San Francisco Bay Area work mode choice data set comprises 5,029 home-to-work commute trips in the San Francisco Bay Area. The data is drawn from the San Francisco Bay Area Household Travel Survey conducted by the Metropolitan Transportation Commission (MTC) in the spring and fall of 1990 (see (<span class="citation">(<a href="#ref-whiteco" role="doc-biblioref"><strong>whiteco?</strong></a>)</span>, 1991) for details of survey sampling and administration procedures). This survey included a one day travel diary for each household member older than five years and detailed individual and household socio-demographic information.</p>
<p>There are six work mode choice alternatives in the region: drive alone, shared-ride with 2 people, shared ride with 3 or more people, transit, bike, and walk.<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a> The drive alone mode is available for a trip only if the trip-maker’s household has a vehicle available and if the trip-maker has a driver’s license. The shared-ride modes (with 2 people and with 3 or more people) are available for all trips. Transit availability is determined based on the residence and work zones of individuals. The bike mode is deemed available if the one-way home-to-work distance is less than 12 miles, while the walk mode is considered to be available if the one-way home to work distance is less than 4 miles (the distance thresholds to determine bike and walk availability are determined based on the maximum one-way distance of bike and walk-users, respectively).</p>
<p>Level of service data were generated by the Metropolitan Transportation Commission for each zone pair and for each mode. These data were appended to the home-based work trips based on the origin and destination of each trip. The data includes traveler, trip related area and mode related variables for each trip including in-vehicle travel time, out-of-vehicle travel time, travel cost, travel distance, and a mode availability indicator.</p>
<p>Table <a href="estimation-chapter.html#tab:statsJtoWork">5.3</a> provides information about the availability and usage of each alternative and the average values of in-vehicle time, out-of-vehicle time and travel cost in the sample. Drive alone is available to most work commuters in the Bay Area and is the most frequently chosen alternative. The shared-ride modes are available for all trips (by construction) and together account for the next largest share of chosen alternatives. The combined total of drive alone and shared ride trips represent close to 85% of all work trips. Transit trips constitute roughly 10% of work trips, a substantially greater share than in most metropolitan regions in the U.S. The fraction of trips using non-motorized modes (walk and bike) constitutes a small but not insignificant portion of total trips.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="estimation-chapter.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#calculations =======================================</span></span>
<span id="cb31-2"><a href="estimation-chapter.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate IVTT</span></span>
<span id="cb31-3"><a href="estimation-chapter.html#cb31-3" aria-hidden="true" tabindex="-1"></a>sf_wm_ivtt <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="estimation-chapter.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, altnum, chosen, ivtt, hhinc) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="estimation-chapter.html#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hhid, perid) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="estimation-chapter.html#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">chosen =</span> <span class="fu">max</span>(chosen <span class="sc">*</span> altnum) ) <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="estimation-chapter.html#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(altnum, ivtt, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb31-8"><a href="estimation-chapter.html#cb31-8" aria-hidden="true" tabindex="-1"></a>ivtt_raw <span class="ot">&lt;-</span> <span class="fu">apply</span>(sf_wm_ivtt,<span class="dv">2</span>,<span class="cf">function</span>(x) <span class="fu">mean</span>(x[x<span class="sc">&gt;</span><span class="dv">0</span>]))</span>
<span id="cb31-9"><a href="estimation-chapter.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate OVTT</span></span>
<span id="cb31-10"><a href="estimation-chapter.html#cb31-10" aria-hidden="true" tabindex="-1"></a>sf_wm_ovtt <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb31-11"><a href="estimation-chapter.html#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, altnum, chosen, ovtt, hhinc) <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="estimation-chapter.html#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hhid, perid) <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="estimation-chapter.html#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">chosen =</span> <span class="fu">max</span>(chosen <span class="sc">*</span> altnum) ) <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="estimation-chapter.html#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(altnum, ovtt, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb31-15"><a href="estimation-chapter.html#cb31-15" aria-hidden="true" tabindex="-1"></a>ovtt_raw <span class="ot">&lt;-</span> <span class="fu">apply</span>(sf_wm_ovtt,<span class="dv">2</span>,<span class="cf">function</span>(x) <span class="fu">mean</span>(x[x<span class="sc">&gt;</span><span class="dv">0</span>]))</span>
<span id="cb31-16"><a href="estimation-chapter.html#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate OVTT for walk (using TVTT)</span></span>
<span id="cb31-17"><a href="estimation-chapter.html#cb31-17" aria-hidden="true" tabindex="-1"></a>sf_wm_tvtt <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb31-18"><a href="estimation-chapter.html#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, altnum, chosen, tvtt, hhinc) <span class="sc">%&gt;%</span></span>
<span id="cb31-19"><a href="estimation-chapter.html#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hhid, perid) <span class="sc">%&gt;%</span></span>
<span id="cb31-20"><a href="estimation-chapter.html#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">chosen =</span> <span class="fu">max</span>(chosen <span class="sc">*</span> altnum) ) <span class="sc">%&gt;%</span></span>
<span id="cb31-21"><a href="estimation-chapter.html#cb31-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(altnum, tvtt, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb31-22"><a href="estimation-chapter.html#cb31-22" aria-hidden="true" tabindex="-1"></a>tvtt_raw <span class="ot">&lt;-</span> <span class="fu">apply</span>(sf_wm_tvtt,<span class="dv">2</span>,<span class="cf">function</span>(x) <span class="fu">mean</span>(x[x<span class="sc">&gt;</span><span class="dv">0</span>]))</span>
<span id="cb31-23"><a href="estimation-chapter.html#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate market share</span></span>
<span id="cb31-24"><a href="estimation-chapter.html#cb31-24" aria-hidden="true" tabindex="-1"></a>Base_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> cost <span class="sc">+</span> tvtt <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit)</span>
<span id="cb31-25"><a href="estimation-chapter.html#cb31-25" aria-hidden="true" tabindex="-1"></a>mrktshr_raw <span class="ot">&lt;-</span> Base_model<span class="sc">$</span>freq <span class="sc">/</span> <span class="fu">nrow</span>(sf_wm_tvtt)</span>
<span id="cb31-26"><a href="estimation-chapter.html#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate COST</span></span>
<span id="cb31-27"><a href="estimation-chapter.html#cb31-27" aria-hidden="true" tabindex="-1"></a>sf_wm_cost <span class="ot">&lt;-</span> sf_work_mode  <span class="sc">%&gt;%</span></span>
<span id="cb31-28"><a href="estimation-chapter.html#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hhid, perid, altnum, chosen, cost, hhinc) <span class="sc">%&gt;%</span></span>
<span id="cb31-29"><a href="estimation-chapter.html#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hhid, perid) <span class="sc">%&gt;%</span></span>
<span id="cb31-30"><a href="estimation-chapter.html#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>( <span class="at">chosen =</span> <span class="fu">max</span>(chosen <span class="sc">*</span> altnum) ) <span class="sc">%&gt;%</span></span>
<span id="cb31-31"><a href="estimation-chapter.html#cb31-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(altnum, cost, <span class="at">fill =</span> <span class="dv">0</span>)</span>
<span id="cb31-32"><a href="estimation-chapter.html#cb31-32" aria-hidden="true" tabindex="-1"></a>cost_raw <span class="ot">&lt;-</span> <span class="fu">apply</span>(sf_wm_cost,<span class="dv">2</span>,<span class="cf">function</span>(x) <span class="fu">mean</span>(x[x<span class="sc">&gt;</span><span class="dv">0</span>]))</span>
<span id="cb31-33"><a href="estimation-chapter.html#cb31-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-34"><a href="estimation-chapter.html#cb31-34" aria-hidden="true" tabindex="-1"></a><span class="co">#create the table ==================================</span></span>
<span id="cb31-35"><a href="estimation-chapter.html#cb31-35" aria-hidden="true" tabindex="-1"></a>statsJtoWork <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb31-36"><a href="estimation-chapter.html#cb31-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Mode&quot;</span><span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1. Drive Alone&quot;</span>,<span class="st">&quot;2. Shared Ride (2)&quot;</span>,<span class="st">&quot;3. Shared Ride (3+)&quot;</span>, <span class="st">&quot;4. Transit&quot;</span>, <span class="st">&quot;5. Bike&quot;</span>, <span class="st">&quot;6. Walk&quot;</span>),</span>
<span id="cb31-37"><a href="estimation-chapter.html#cb31-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Fraction of Sample with Mode Available (%)&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">94.6</span>,<span class="fl">100.0</span>,<span class="fl">100.0</span>,<span class="fl">79.6</span>,<span class="fl">34.6</span>,<span class="fl">29.4</span>),</span>
<span id="cb31-38"><a href="estimation-chapter.html#cb31-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Market Share (%)&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(mrktshr_raw) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb31-39"><a href="estimation-chapter.html#cb31-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Average IVTT (minutes)&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(ivtt_raw[ <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)]), </span>
<span id="cb31-40"><a href="estimation-chapter.html#cb31-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Average OVTT (minutes)&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(ovtt_raw[<span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">9</span>)],  tvtt_raw[<span class="fu">c</span>(<span class="dv">10</span>)]),</span>
<span id="cb31-41"><a href="estimation-chapter.html#cb31-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Average Cost (1990 cents)&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(cost_raw[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)]))</span>
<span id="cb31-42"><a href="estimation-chapter.html#cb31-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-43"><a href="estimation-chapter.html#cb31-43" aria-hidden="true" tabindex="-1"></a><span class="co">#display the table =================================</span></span>
<span id="cb31-44"><a href="estimation-chapter.html#cb31-44" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(statsJtoWork, <span class="at">digits =</span> <span class="dv">1</span>,</span>
<span id="cb31-45"><a href="estimation-chapter.html#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Sample Statistics for Bay Area Journey-to-Work Modal Data&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-46"><a href="estimation-chapter.html#cb31-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:statsJtoWork">Table 5.3: </span>Sample Statistics for Bay Area Journey-to-Work Modal Data
</caption>
<thead>
<tr>
<th style="text-align:left;">
Mode
</th>
<th style="text-align:right;">
Fraction of Sample with Mode Available (%)
</th>
<th style="text-align:right;">
Market Share (%)
</th>
<th style="text-align:right;">
Average IVTT (minutes)
</th>
<th style="text-align:right;">
Average OVTT (minutes)
</th>
<th style="text-align:right;">
Average Cost (1990 cents)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<ol style="list-style-type: decimal">
<li>Drive Alone
</td>
<td style="text-align:right;">
94.6
</td>
<td style="text-align:right;">
72.3
</td>
<td style="text-align:right;">
20.9
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
176.4
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="2" style="list-style-type: decimal">
<li>Shared Ride (2)
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:right;">
10.3
</td>
<td style="text-align:right;">
25.2
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
89.3
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="3" style="list-style-type: decimal">
<li>Shared Ride (3+)
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
26.8
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
50.4
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="4" style="list-style-type: decimal">
<li>Transit
</td>
<td style="text-align:right;">
79.6
</td>
<td style="text-align:right;">
9.9
</td>
<td style="text-align:right;">
24.6
</td>
<td style="text-align:right;">
28.8
</td>
<td style="text-align:right;">
122.8
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="5" style="list-style-type: decimal">
<li>Bike
</td>
<td style="text-align:right;">
34.6
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
28.0
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
NaN
</td>
</tr>
<tr>
<td style="text-align:left;">
<ol start="6" style="list-style-type: decimal">
<li>Walk
</td>
<td style="text-align:right;">
29.4
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:right;">
NaN
</td>
<td style="text-align:right;">
48.7
</td>
<td style="text-align:right;">
NaN
</td>
</tr>
</tbody>
</table></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol>
</div>
<div id="estimation-basic" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Estimation of MNL Model with Basic Specification</h2>
<p>We use the San Francisco Bay Area data to estimate a multinomial logit work mode choice model using a basic specification which includes travel time, travel cost and household income as the explanatory variables. Travel time and travel cost represent mode related attributes; all other things being equal, a faster mode of travel is more likely to be chosen than a slower mode and a less expensive mode is more likely to be chosen than a costlier mode. Household income is included in the model with the expectation that travelers from high income households are more likely to drive alone than to use other travel modes.</p>
<p>The multinomial logit work trip mode choice models are estimated using ALOGIT, LIMDEP and ELM software, to illustrate differences in the outputs of these packages,<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> as well as a specially programmed module for Matlab. The data sets, input control files, and estimation output results for this a selection of other model specifications for both software packages are included in the CD-ROM supplied with this manual. The Matlab module code, command files and output for all specifications in the manual are also included in the CD-ROM.</p>
<p>The travel time (TT) and travel cost (TC) variables are specified as generic in this model. This implies that an increase of one unit of travel time or travel cost has the same impact on modal utility for all six modes. Household Income (Inc) is included as an alternative-specific variable. The drive alone mode is considered the base alternative for household income and the modal constants (see section 4.1.2.2 for a discussion of the need for a base alternative for these variables).</p>
<p>The following mode labels are used in the subsequent discussion and equations: DA (drive alone), SR2 (shared ride with 2 people), SR3+ (shared ride with 3 or more people), TR (transit), BK (bike) and WK (walk). The deterministic portion of the utility for these modes, based on the utility specification discussed above, may be written as:</p>
<p><span class="math display" id="eq:utilspecDA">\[\begin{equation}
  V_{DA} = \beta_{1} \times TT_{DA} + \beta_{2} \times TC_{DA}
  \tag{5.1}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:utilspecSR2">\[\begin{equation}
  V_{SR2} = \beta_{SR2} + \beta_{1} \times TT_{SR2} + \beta_{2} \times TC_{SR2} + \gamma_{SR2} \times Inc
  \tag{5.2}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:utilspecSR3">\[\begin{equation}
  V_{SR3+} = \beta_{SR3+} + \beta_{1} \times TT_{SR3+} + \beta_{2} \times TC_{SR3+} + \gamma_{SR3+} \times Inc
  \tag{5.3}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:utilspecTR">\[\begin{equation}
  V_{TR} = \beta_{TR} + \beta_{1} \times TT_{TR} + \beta_{2} \times TC_{TR} + \gamma_{TR} \times Inc
  \tag{5.4}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:utilspecBK">\[\begin{equation}
  V_{BK} = \beta_{BK} + \beta_{1} \times TT_{BK} + \beta_{2} \times TC_{BK} + \gamma_{BK} \times Inc
  \tag{5.5}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:utilspecBK">\[\begin{equation}
  V_{WK} = \beta_{WK} + \beta_{1} \times TT_{WK} + \beta_{2} \times TC_{WK} + \gamma_{WK} \times Inc
  \tag{5.5}
\end{equation}\]</span></p>
<p>The estimation results reported in this manual are obtained from software
programmed using the <code>mlogit</code> package for R, with estimation code embedded in
the document. The
output for the above model specification is shown in structured format in Table
<a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a>. Other commercial and free software packages are
available, including ALOGIT, LIMDEP, Biogeme (Python), Apollo (R), and ELM.
The outputs from these and other software package typically include, at least,
the following estimation results:</p>
<ul>
<li>Parameter<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a> names, parameter estimates, standard errors of these estimates and the corresponding t-statistics for each variable/parameter;</li>
<li>Log-likelihood values at zero (equal probability model), constants only (market shares model) and at convergence and</li>
<li>Rho-Squared and other indicators of goodness of fit.</li>
</ul>
<p>In addition, different software reports a variety of other information either as part of the default output or as a user selected option. These include:</p>
<ul>
<li>The number of observations,</li>
<li>The number of cases for which each alternative is available,</li>
<li>The number of cases for which each alternative is chosen,</li>
<li>The number of iterations required to obtain convergence, and</li>
<li>The status of the convergence process at each iteration.</li>
</ul>
<p>The value for the log-likelihood at zero and constants can be obtained for either software by estimating models without (zero) and with (constants) alternative specific constants<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a> and no other variables. Further, the log-likelihood at zero can be calculated directly as</p>
<p>$ _t ln(1/NAlt_t)$</p>
<p>In the next three sections, we review the estimation results for the base model using informal judgment-based tests (section 5.7.1), goodness-of-fit measures (section 5.7.2), and statistical tests (section 5.7.3). These elements, taken together, provide a basis to evaluate each model and to compare models with different specifications.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="estimation-chapter.html#cb32-1" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> ivtt <span class="sc">+</span> cost, <span class="at">data =</span> sf_mlogit)</span>
<span id="cb32-2"><a href="estimation-chapter.html#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="estimation-chapter.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># estimate a model with constants only by constraining a single generic variable</span></span>
<span id="cb32-4"><a href="estimation-chapter.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># to be zero</span></span>
<span id="cb32-5"><a href="estimation-chapter.html#cb32-5" aria-hidden="true" tabindex="-1"></a>market_shares <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> ivtt, <span class="at">data =</span> sf_mlogit, <span class="at">constPar =</span> <span class="fu">c</span>(<span class="st">&quot;ivtt&quot;</span> <span class="ot">=</span> <span class="dv">0</span>))</span>
<span id="cb32-6"><a href="estimation-chapter.html#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="estimation-chapter.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate a null model by constraining ALL the parameters to be zero. </span></span>
<span id="cb32-8"><a href="estimation-chapter.html#cb32-8" aria-hidden="true" tabindex="-1"></a>fixed_coefs <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">6</span>) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="fu">names</span>(<span class="fu">coef</span>(market_shares)), <span class="st">&quot;ivtt&quot;</span>))</span>
<span id="cb32-9"><a href="estimation-chapter.html#cb32-9" aria-hidden="true" tabindex="-1"></a>null_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> ivtt, <span class="at">data =</span> sf_mlogit, <span class="at">start =</span> fixed_coefs, <span class="at">iterlim =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="estimation-chapter.html#cb33-1" aria-hidden="true" tabindex="-1"></a>basic_estimation <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb33-2"><a href="estimation-chapter.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Null Model&quot;</span> <span class="ot">=</span> null_model,</span>
<span id="cb33-3"><a href="estimation-chapter.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Market Shares&quot;</span> <span class="ot">=</span> market_shares,</span>
<span id="cb33-4"><a href="estimation-chapter.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model&quot;</span> <span class="ot">=</span> base</span>
<span id="cb33-5"><a href="estimation-chapter.html#cb33-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-6"><a href="estimation-chapter.html#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="estimation-chapter.html#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb33-8"><a href="estimation-chapter.html#cb33-8" aria-hidden="true" tabindex="-1"></a>  basic_estimation, </span>
<span id="cb33-9"><a href="estimation-chapter.html#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Estimation Results for Zero Coefficient, Constants Only, and Base Models&quot;</span></span>
<span id="cb33-10"><a href="estimation-chapter.html#cb33-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:basic-estimation-table">Table 5.4: </span>Estimation Results for Zero Coefficient, Constants Only, and Base Models
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Null Model
</th>
<th style="text-align:center;">
Market Shares
</th>
<th style="text-align:center;">
Base Model
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 2
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
-2.137
</td>
<td style="text-align:center;">
-2.425
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.044)
</td>
<td style="text-align:center;">
(0.048)
</td>
<td style="text-align:center;">
(0.058)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 3++
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
-3.303
</td>
<td style="text-align:center;">
-3.856
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.046)
</td>
<td style="text-align:center;">
(0.081)
</td>
<td style="text-align:center;">
(0.095)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Transit
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
-1.950
</td>
<td style="text-align:center;">
-2.060
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.053)
</td>
<td style="text-align:center;">
(0.051)
</td>
<td style="text-align:center;">
(0.065)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Bike
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
-3.335
</td>
<td style="text-align:center;">
-3.424
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.085)
</td>
<td style="text-align:center;">
(0.145)
</td>
<td style="text-align:center;">
(0.166)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Walk
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
-2.040
</td>
<td style="text-align:center;">
-2.717
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.073)
</td>
<td style="text-align:center;">
(0.085)
</td>
<td style="text-align:center;">
(0.096)
</td>
</tr>
<tr>
<td style="text-align:left;">
ivtt
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.032
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.005)
</td>
</tr>
<tr>
<td style="text-align:left;">
cost
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.005
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.000)
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:center;">
14631.2
</td>
<td style="text-align:center;">
8277.8
</td>
<td style="text-align:center;">
7600.3
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:center;">
-7309.601
</td>
<td style="text-align:center;">
-4132.916
</td>
<td style="text-align:center;">
-3793.129
</td>
</tr>
<tr>
<td style="text-align:left;">
rho2
</td>
<td style="text-align:center;">
-0.505
</td>
<td style="text-align:center;">
0.149
</td>
<td style="text-align:center;">
0.219
</td>
</tr>
<tr>
<td style="text-align:left;">
rho20
</td>
<td style="text-align:center;">
0.189
</td>
<td style="text-align:center;">
0.541
</td>
<td style="text-align:center;">
0.579
</td>
</tr>
</tbody>
</table>
<div id="informal-tests" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Informal Tests</h3>
<p>A variety of informal tests can be applied to an estimated model. These tests are designed to assess the reasonableness of the implications of estimated parameters. The most common tests concern:</p>
<ul>
<li>The sign of parameters (do the associated variables have a positive or negative effect on the alternatives with which they are associated?),</li>
<li>The difference (positive or negative) within sets of alternative specific variables (does the inclusion of this variable have a more or less positive effect on one alternative relative to another?) and</li>
<li>The ratio of pairs of parameters (is the ratio between the parameters of the correct sign and in a reasonable range?).</li>
</ul>
<div id="signs-of-parameters" class="section level4" number="5.7.1.1">
<h4><span class="header-section-number">5.7.1.1</span> Signs of Parameters</h4>
<p>The most basic test of the estimation results is to examine the signs of the estimated parameters with theory, intuition and judgment regarding the expected impact of the corresponding variables. The estimated coefficients on the travel time and cost variables in Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a> are negative, as expected, implying that the utility of a mode decreases as the mode becomes slower and/or more expensive. This, in turn, will reduce the choice probability of the corresponding mode.</p>
</div>
<div id="differences-in-alternative-specific-variable-parameters-across-alternatives" class="section level4" number="5.7.1.2">
<h4><span class="header-section-number">5.7.1.2</span> Differences in Alternative Specific Variable Parameters across Alternatives</h4>
<p>We often have expectations about the impact of decision-maker characteristics on different alternatives. For example, when analyzing mode choice, we expect a number of variables to be more positive for automobile alternatives, especially Drive Alone, than for other alternatives. These include income, automobile ownership, home ownership, single family dwelling unit, etc. Since DA is the reference alternative in these models, we expect negative parameters on all alternative specific income variables, with small values for the shared ride alternatives and larger values for other alternatives, to reflect our intuition that increasing income will be associated with decreased preference for all other alternatives relative to drive alone. All the estimated alternative specific income parameters in Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a> Estimation Results for Zero Coefficient, Constants Only and Base Models are negative, as expected, with the exception of the parameter for shared ride 3+. The positive sign for the shared ride 3+ parameter is counter-intuitive but very small and not significantly different from zero. An approach to address this problem is described in section 5.7.3.1.</p>
<p>Additional informal tests involve comparisons among the estimated income parameters. The differences in the magnitude of these alternative-specific income parameters indicate the relative impact of increasing income on the utility and, hence, the choice probability of each mode. The results reported in Table 5 2 show that an increase in income will have a larger negative effect on the utilities of the non-motorized modes (bike and walk) than on those of transit and shared ride 2 modes. It is important to understand that the change in the choice probability of that alternative is not determined by the sign of the income parameter for a particular alternative but on the value of the parameter relative to the weighted mean of the income parameters across all alternatives, as described in section 4.5. For example, in the base model specification (Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a>), an increase in income will increase the probability of choosing drive alone and shared ride 3+ (the alternatives with the most positive parameters)<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> and will decrease the probability of choosing walk and bike (the alternatives with the smallest, most negative, parameters). However, the effect on shared ride 2 and transit is unclear; as income increases, they will lose some probability to drive alone and shared ride 3+ and gain some from walk and bike. The net effect will depend on the difference between the parameter for the alternative of interest and the individual choice probability weighted average of all the alternative specific income parameters (including zero for the base alternative) as illustrated in equation 4.58.</p>
</div>
<div id="the-ratio-of-pairs-of-parameters" class="section level4" number="5.7.1.3">
<h4><span class="header-section-number">5.7.1.3</span> The Ratio of Pairs of Parameters</h4>
<p>The ratio of the estimated travel time and travel cost parameters provides an
estimate of the value of time implied by the model; this can serve as another
important informal test for evaluating the reasonableness of the model. For
example, in the Base Model reported in Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a>,
the implied value of time is <span class="math inline">\(-0.0315962/-0.0050606\)</span> or
6.2435342 cents per minute (the units are
determined from the units of the time and cost variables used in estimation).
This is equivalent to $6.26 per hour which is much lower that the average wage
rate in the area at the time of the survey, approximately $21.20 per hour,
suggesting that the estimated value of time may be too low. We revisit this
issue in greater detail in the next chapter.</p>
<p>Similar ratios may be used to assess the reasonableness of the relative magnitudes of other pairs of parameters. These include out of vehicle time relative to in vehicle time, travel time reliability (if available) relative to average travel time, etc.</p>
</div>
</div>
<div id="overall-goodness-of-fit-measures" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Overall Goodness-of-Fit Measures</h3>
<p>This section presents a descriptive measure, called the rho-squared value (<span class="math inline">\(\rho^2\)</span>) which can be used to describe the overall goodness of fit of the model. We can understand the formulation of this value in terms of the following figure which shows the scalar relationship among the log-likelihood values for a zero coefficients model (or the equally likely model), a constants only or market share model, the estimated model and a perfect prediction model. In the figure, LL(0) represents the log-likelihood with zero coefficients (which results in equal likelihood of choosing each available alternative), <span class="math inline">\(LL(0)\)</span> represents the log-likelihood for the constants only model, <span class="math inline">\(LL(\hat{\beta})\)</span> represents the log-likelihood for the estimated model and LL(*) = 0 is the log-likelihood for the perfect prediction model.</p>
<div class="figure"><span id="fig:loglikelihooddif"></span>
<img src="img/likelihood_numberline.PNG" alt="Relationship between Different Log-likelihood Measures" width="616" />
<p class="caption">
Figure 5.1: Relationship between Different Log-likelihood Measures
</p>
</div>
<p>The relationships among modeling results will always appear in the order shown provided the estimated model includes a full set of alternative specific constants. That is, the constants only model is always better than the equally likely model, and the estimated model with constants is always better than the constants only model. The order of different estimated models will vary except that any model which is a restricted version of another model will be to the left of the unrestricted model.</p>
<p>The rho-squared (<span class="math inline">\(\rho_0^2\)</span>) value is based on the relationship among the log-likelihood values indicated in Figure 5.2. It is simply the ratio of the distance between the reference model and the estimated model divided by the difference between the reference model and a perfect model. If the reference model is the equally likely model, the rho square with respect to zero, <span class="math inline">\(\rho_0^2\)</span>, is:</p>
<p><span class="math display" id="eq:fiveseven">\[\begin{equation}
\rho_0^2 = \frac{LL(\hat{\beta}) - LL(0)}{LL(\star) - LL(0)}
\tag{5.6}
\end{equation}\]</span></p>
<p>Since the log-likelihood value for the perfect model is zero,<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a> the <span class="math inline">\(\rho_0^2\)</span> measure reduces to:</p>
<p><span class="math display" id="eq:fiveeight">\[\begin{equation}
\rho_0^2 = 1- \frac{LL(\hat{\beta})}{LL(0)}
\tag{5.7}
\end{equation}\]</span></p>
<p>Similarly, the rho-square with respect to the constants only model is:</p>
<p><span class="math display" id="eq:fivenine">\[\begin{equation}
\rho_0^2 = \frac{LL(\hat{\beta}) - LL(c)}{LL(\star) - LL(c)} = 1- \frac{LL(\hat{\beta})}{LL(c)}
\tag{5.8}
\end{equation}\]</span></p>
<p>By definition, the values of both rho-squared measures lie between 0 and 1 (this is similar to the R^2 measure for linear regression models). A value of zero implies that the model is no better than the reference model, whereas a value of one implies a perfect model; that is, every choice is predicted correctly.</p>
<p>The rho-squared values for the basic model specification in Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a> are computed based on the formulae shown below as:</p>
<p><span class="math display" id="eq:fiveten">\[\begin{equation}
\rho_0^2 = 1- \frac{(-3626.2)}{(-7309.6)} = 0.5039 \qquad \rho_c^2 = 1- \frac{(-3626.2)}{(-4132.9)} = 0.1226
\tag{5.9}
\end{equation}\]</span></p>
<p>The rho-squared measures are widely used to describe the goodness of fit for choice models because of their intuitive formulation. The <span class="math inline">\(\rho_0^2\)</span> measures the improvement due to all elements of the model, including the fit to market shares, which is not very interesting for disaggregate analysis so it should not be used to assess models in which the sample shares are very unequal. The rho-squared measure with respect to the constant only model, <span class="math inline">\(\rho_c^2\)</span> , controls for the choice proportions in the estimation sample and is therefore a better measure to use for evaluating models.</p>
<p>A problem with both rho-squared measures is that there are no guidelines for a “good” rho-squared value. Consequently, the measures are of limited value in assessing the quality of an estimated model and should be used with caution even in assessing the relative fit among alternative specifications. It is preferable to use the log-likelihood statistic (which has a formal and convenient mechanism to test among alternative model specifications) to support the selection of a preferred specification among alternative specifications.</p>
<p>Another problem with the rho-squared measures is that they improve no matter what variable is added to the model independent of its importance. This directly results from the fact that the objective function of the model is being modeled with one or more additional degrees of freedom and that the same data that is used for estimation is used to assess the goodness of fit of the model. One approach to this problem is to replace the rho-squared measure with an adjusted rho-square measure which is designed to take account of these factors. The adjusted rho-squared for the zero model is given by:</p>
<p><span class="math display" id="eq:fiveeleven">\[\begin{equation}
\bar{\rho_0^2} = \frac{[LL(\hat{\beta}) - K] -LL(0)}{LL(\star) - LL(0)} = 1-\frac{LL(\hat{\beta}) - K}{LL(0)}
\tag{5.10}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(K\)</span> is the number of degrees of freedom (parameters) used in the model.</p>
<p>The corresponding adjusted rho-squared for the constants only model is given by:</p>
<p><span class="math display" id="eq:fivetwelve">\[\begin{equation}
\bar{\rho_c^2} = \frac{LL(\hat{\beta}) - K - (LL(C)-K_{MS}}{LL(\star) - (LL(C)-K_{MS})} = 1-\frac{LL(\hat{\beta}) - K}{LL(C)-K_{MS}}
\tag{5.11}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(K_{MS}\)</span> is the number of degrees of freedom (parameters) used in the constants only model.</p>
</div>
<div id="statistical-tests" class="section level3" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> Statistical Tests</h3>
<p>Statistical tests may be used to evaluate formal hypotheses about individual parameters or groups of parameters taken together. In this section we describe each of these tests.</p>
<div id="test-of-individual-parameters" class="section level4" number="5.7.3.1">
<h4><span class="header-section-number">5.7.3.1</span> Test of Individual Parameters</h4>
<p>There is sampling error associated with the model parameters because the model is estimated from only a sample of the relevant population (the relevant population includes all commuters in the Bay Area). The magnitude of the sampling error in a parameter is provided by the standard error associated with that parameter; the larger the standard error, the lower the precision with which the corresponding parameter is estimated. The standard error plays an important role in testing whether a particular parameter is equal to some hypothesized value, as we discuss next.</p>
<p>The statistic used for testing the null hypothesis that a parameter <span class="math inline">\(\hat{\beta_{k}}\)</span> is equal to some hypothesized value, <span class="math inline">\({\beta_{k}^*}\)</span>, is the asymptotic t-statistic, which takes the following form:</p>
<p><span class="math display" id="eq:asymptotict-statistic">\[\begin{equation}
\displaystyle t-statistic = \frac{\hat{\beta_{k}}-\beta_{k}^{*}}{S_{k}} 
\tag{5.12}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(\hat{\beta_{k}}\)</span> is the estimate for the <span class="math inline">\(k^{th}\)</span> parameter,
<span class="math inline">\(\beta_{k}^{*}\)</span> is the hypothesized value for the <span class="math inline">\(k^{th}\)</span> parameter and
<span class="math inline">\(S_{k}\)</span> is the standard error of the estimate.</p>
<p>Sufficiently large absolute values of the <em>t-statistic</em> lead to the rejection of the null hypothesis that the parameter is equal to the hypothesized value. When the hypothesized value, <span class="math inline">\(\beta_{k}^{*}\)</span>, is zero, the t-statistic becomes the ratio of the estimated parameter to the standard error. The default estimation output from most software packages includes the t-statistic for the test of the hypothesis that the true value is zero. The rejection of this null hypothesis implies that the corresponding variable has a significant impact on the modal utilities and suggests that the variable should be retained in the model. Low absolute values of the t-statistic imply that the variable does not contribute significantly to the explanatory power of the model and can be considered for exclusion. If it is concluded that the hypothesis is not rejected, the equality constraint can be incorporated in the model by creating a new variable <span class="math inline">\(X_{kl} = X_{k} + X_{l}\)</span> .</p>
<p>The selection of a critical value for the t-statistic test is a matter of judgment and depends on the level of confidence with which the analyst wants to test his/her hypotheses. The critical t-values for different levels of confidence for samples sizes larger than 150 (which is the norm in mode choice analysis) are shown in Table 5-3. It should be apparent that the critical t-value increases with the desired level of confidence. Thus, one can conclude that a particular variable has no influence on choice (or equivalently that the true parameter associated with the variable is zero) can be rejected at the 90% level of confidence if the absolute value of the t-statistic is greater than 1.645 and at the 95% level of confidence if the t-statistic is greater than 1.960.<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="estimation-chapter.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">confid =</span> <span class="fu">c</span>(.<span class="dv">9</span>, .<span class="dv">95</span>, .<span class="dv">99</span>, .<span class="dv">995</span>, .<span class="dv">999</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="estimation-chapter.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tval=</span><span class="fu">qnorm</span>((<span class="dv">1</span><span class="sc">-</span>confid)<span class="sc">/</span><span class="dv">2</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="estimation-chapter.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;Critical t-Values for Selected Confidence Levels and Large Samples&quot;</span>,</span>
<span id="cb34-4"><a href="estimation-chapter.html#cb34-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Confidence Level&quot;</span>, <span class="st">&quot;Critical t-value (two-tailed test)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="estimation-chapter.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:confidencelevels">Table 5.5: </span>Critical t-Values for Selected Confidence Levels and Large Samples
</caption>
<thead>
<tr>
<th style="text-align:right;">
Confidence Level
</th>
<th style="text-align:right;">
Critical t-value (two-tailed test)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.900
</td>
<td style="text-align:right;">
1.644854
</td>
</tr>
<tr>
<td style="text-align:right;">
0.950
</td>
<td style="text-align:right;">
1.959964
</td>
</tr>
<tr>
<td style="text-align:right;">
0.990
</td>
<td style="text-align:right;">
2.575829
</td>
</tr>
<tr>
<td style="text-align:right;">
0.995
</td>
<td style="text-align:right;">
2.807034
</td>
</tr>
<tr>
<td style="text-align:right;">
0.999
</td>
<td style="text-align:right;">
3.290527
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="estimation-chapter.html#cb35-1" aria-hidden="true" tabindex="-1"></a>these_colors <span class="ot">&lt;-</span> wesanderson<span class="sc">::</span><span class="fu">wes_palette</span>(<span class="st">&quot;Zissou1&quot;</span>)</span>
<span id="cb35-2"><a href="estimation-chapter.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>,<span class="dv">4</span>))) <span class="sc">+</span></span>
<span id="cb35-3"><a href="estimation-chapter.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot the pdf</span></span>
<span id="cb35-4"><a href="estimation-chapter.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(</span>
<span id="cb35-5"><a href="estimation-chapter.html#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) <span class="fu">dt</span>(x, <span class="at">df =</span> <span class="dv">29</span>),</span>
<span id="cb35-6"><a href="estimation-chapter.html#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x),</span>
<span id="cb35-7"><a href="estimation-chapter.html#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;area&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey75&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-8"><a href="estimation-chapter.html#cb35-8" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Shade above 2</span></span>
<span id="cb35-9"><a href="estimation-chapter.html#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(</span>
<span id="cb35-10"><a href="estimation-chapter.html#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x <span class="sc">&gt;=</span> <span class="fl">1.645</span>, <span class="fu">dt</span>(x, <span class="at">df =</span> <span class="dv">29</span>), <span class="cn">NA</span>),</span>
<span id="cb35-11"><a href="estimation-chapter.html#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x),</span>
<span id="cb35-12"><a href="estimation-chapter.html#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;area&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">fill =</span> these_colors[<span class="dv">4</span>], <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-13"><a href="estimation-chapter.html#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Shade above 1.645</span></span>
<span id="cb35-14"><a href="estimation-chapter.html#cb35-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">stat_function</span>(</span>
<span id="cb35-15"><a href="estimation-chapter.html#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x <span class="sc">&gt;=</span> <span class="dv">2</span>, <span class="fu">dt</span>(x, <span class="at">df =</span> <span class="dv">29</span>), <span class="cn">NA</span>),</span>
<span id="cb35-16"><a href="estimation-chapter.html#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x),</span>
<span id="cb35-17"><a href="estimation-chapter.html#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;area&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">fill =</span> these_colors[<span class="dv">5</span>], <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-18"><a href="estimation-chapter.html#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Shade below -1.645</span></span>
<span id="cb35-19"><a href="estimation-chapter.html#cb35-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(</span>
<span id="cb35-20"><a href="estimation-chapter.html#cb35-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x <span class="sc">&lt;=</span> <span class="sc">-</span><span class="fl">1.645</span>, <span class="fu">dt</span>(x, <span class="at">df =</span> <span class="dv">29</span>), <span class="cn">NA</span>),</span>
<span id="cb35-21"><a href="estimation-chapter.html#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x),</span>
<span id="cb35-22"><a href="estimation-chapter.html#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;area&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">fill =</span> these_colors[<span class="dv">4</span>], <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-23"><a href="estimation-chapter.html#cb35-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Shade below -2</span></span>
<span id="cb35-24"><a href="estimation-chapter.html#cb35-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(</span>
<span id="cb35-25"><a href="estimation-chapter.html#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> <span class="cf">function</span>(x) <span class="fu">ifelse</span>(x <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">2</span>, <span class="fu">dt</span>(x, <span class="at">df =</span> <span class="dv">29</span>), <span class="cn">NA</span>),</span>
<span id="cb35-26"><a href="estimation-chapter.html#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x),</span>
<span id="cb35-27"><a href="estimation-chapter.html#cb35-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">&quot;area&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>, <span class="at">fill =</span> these_colors[<span class="dv">5</span>], <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-28"><a href="estimation-chapter.html#cb35-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">expression</span>(<span class="fu">paste</span>(<span class="st">&quot;The&quot;</span>, <span class="fu">italic</span>(t),</span>
<span id="cb35-29"><a href="estimation-chapter.html#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot; distribution with a 90% and 95% confidence interval&quot;</span>))) <span class="sc">+</span></span>
<span id="cb35-30"><a href="estimation-chapter.html#cb35-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="fu">expression</span>(<span class="fu">italic</span>(t)))  <span class="sc">+</span> </span>
<span id="cb35-31"><a href="estimation-chapter.html#cb35-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="05-mnl-estimation_files/figure-html/tdistribution-1.png" width="672" /></p>
<p>We illustrate the use of the t-test by reviewing the t-statistics for each parameter in the initial model specification (Table 5-2). Both the travel cost and travel time parameters have large absolute t-statistic values (20.6 and 16.6, respectively) which lead us to reject the hypothesis that these variables have no effect on modal utilities at a confidence level higher than 99.9%. Thus, these variables should be retained in the model. All of the other t-statistics, except for Income-Shared Ride 2, Income-Shared Ride 3+ and the walk constant are greater than 1.960 (95% confidence) supporting the inclusion of the corresponding variables. The t-statistics on the shared ride specific income variables are even less than 1.645 in absolute value (90% confidence), suggesting that the effect of income on the utilities of the shared ride modes may not differentiate them from the reference (drive alone) mode. Consequently, the analyst should consider removing these income variables from the utility function specifications for the shared ride modes. The case is particularly compelling for removal of the income shared ride 3+ variable since the t-statistic is very low and the parameter has a counter-intuitive sign. Another alternative would be to combine the two shared ride income parameters suggesting that income has differential effect between drive alone and shared ride but not between shared ride 2 and shared ride 3+ (when this is done, the combined variable obtains a small negative parameter which is not statistically different from zero). This variable could be deleted or retained according to the judgment of the analyst as described in Section 6.2.1.</p>
<p>An alternative approach is to report the t-statistic to two or three decimal places and calculate the probability that a t-statistic value of that magnitude or higher would occur due to random variation in sampling as shown in Table 5-4. This is reported as the significance level, which is the complement of the level of confidence. The significance of each parameter can be read directly from the table. Parameters with significance greater than 0.05 (lower in magnitude but more significant), provide a stronger basis for rejecting the hypothesis that the true parameter is zero and that the corresponding variable can be excluded from the model. On the other hand, significance levels of 0.163 (for Income-SR2), 0.888 (for Income-SR3+) and 0.287 (for ASC-Walk) provide little evidence about whether the corresponding variable should or should not be included in the model.<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a></p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Model 1
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 2
</td>
<td style="text-align:center;">
-2.178*** (-20.815)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 3++
</td>
<td style="text-align:center;">
-3.725*** (-20.964)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Transit
</td>
<td style="text-align:center;">
-0.671*** (-5.060)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Bike
</td>
<td style="text-align:center;">
-2.376*** (-7.804)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Walk
</td>
<td style="text-align:center;">
-0.207 (-1.066)
</td>
</tr>
<tr>
<td style="text-align:left;">
cost
</td>
<td style="text-align:center;">
-0.005*** (-20.597)
</td>
</tr>
<tr>
<td style="text-align:left;">
tvtt
</td>
<td style="text-align:center;">
-0.051*** (-16.565)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 2
</td>
<td style="text-align:center;">
-0.002 (-1.397)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 3++
</td>
<td style="text-align:center;">
0.000 (0.141)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Transit
</td>
<td style="text-align:center;">
-0.005*** (-2.891)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Bike
</td>
<td style="text-align:center;">
-0.013** (-2.406)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Walk
</td>
<td style="text-align:center;">
-0.010*** (-3.194)
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:center;">
5029
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:center;">
7276.4
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:center;">
-3626.186
</td>
</tr>
<tr>
<td style="text-align:left;">
rho2
</td>
<td style="text-align:center;">
0.253
</td>
</tr>
<tr>
<td style="text-align:left;">
rho20
</td>
<td style="text-align:center;">
0.598
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup></sup> Note: The numbers in the parentheses are the t-statistics
</td>
</tr>
</tfoot>
<tfoot>
<tr>
<td style="padding: 0; border:0;" colspan="100%">
<sup></sup> * p &lt; 0.1, ** p &lt; 0.05, *** p &lt; 0.01
</td>
</tr>
</tfoot>
</table>
<p>It is important to recognize that a low t-statistic does not require removal of the corresponding variable from the model. If the analyst has a strong reason to believe that the variable is important, and the parameter sign is correct, it is reasonable to retain the variable in the model. A low t-statistic and corresponding low level of significance can best be interpreted as providing little or no information rather than as a basis for excluding a variable. Also, one should be cautious about prematurely deleting variables which are expected to be important as the same variable may be significant when other variables are added to or deleted from the model.</p>
<p>The lack of significance of the alternative specific walk constant is immaterial since the constants represent the average effect of all the variables not included in the model and should always be retained despite the fact that they do not have a well-understood behavioral interpretation.</p>
</div>
<div id="section5-7-3-2" class="section level4" number="5.7.3.2">
<h4><span class="header-section-number">5.7.3.2</span> Test of Linear Relationship between Parameters</h4>
<p>It is often interesting to determine if two parameters are statistically different from one another or if two parameters are related by a specific value ration. These tests are similarly based on the t-statistic; however, the formulation of the test is somewhat different from that described in Section 5.7.3.1. To test the hypothesis <span class="math inline">\(H_{0}:\beta_{k} = \beta_{l}\)</span> vs. <span class="math inline">\(H_{A}:\beta_{k} \ne \beta_{l}\)</span>; we use the asymptotic t-statistic, which takes the following form:</p>
<p><span class="math display">\[\begin{equation}
\displaystyle t-statistic = \frac{\hat{\beta_{k}}-\hat\beta_{l}}{\sqrt{S_{k}^{2}+S_{l}^{2}-2S_{k,l}}} 
(\#eq:asymptotic H0vsHA)
\end{equation}\]</span></p>
<p>where <span class="math inline">\(\hat{\beta_{k}}\)</span>, <span class="math inline">\(\hat{\beta_{l}}\)</span> are the estimates for the <span class="math inline">\(k^{th}\)</span> and <span class="math inline">\(l^{th}\)</span> parameters,
<span class="math inline">\(S_{k}\)</span>, <span class="math inline">\(S_{l}\)</span> are the standard errors of the estimates for the <span class="math inline">\(k^{th}\)</span> and <span class="math inline">\(l^{th}\)</span> parameters and
<span class="math inline">\(S_{k,l}\)</span> is the error covariance for the estimates for the <span class="math inline">\(k^{th}\)</span> and <span class="math inline">\(l^{th}\)</span> parameters.</p>
<p>That is the ratio is the differences between the two parameter estimates and the standard deviation of that difference. As before, sufficiently large absolute values of the <em>t-statistic</em> lead to the rejection of the null hypothesis that the parameters are equal. Again, rejection of this null hypothesis implies that the two corresponding variables have a significant different impact on the modal utilities and suggests that the variable should be retained in the model and low absolute values of the t-statistic imply that the variables do not have significantly different effects on the utility function or the explanatory power of the model and can be combined in the model.</p>
<p>This test can be readily extended to the test of a hypothesis that the two parameters are related by a predefined ratio; for example, the parameter for time and cost may be related by an <em>a priori</em> value of time. In that case, the null hypothesis becomes <span class="math inline">\(H_{0}:\beta_{cost} = (VOT) \times \beta_{time}\)</span> and the alternative hypothesis is <span class="math inline">\(H_{A}:\beta_{cost} \ne (VOT) \times \beta_{time}\)</span>. The corresponding t-statistic becomes</p>
<p><span class="math display">\[\begin{equation}
$\displaystyle t-statistic = \frac{\hat{\beta}_{cost}-(VOT)\hat\beta_{time}}{\sqrt{S_{cost}^{2}+(VOT)^{2}S_{time}^{2}-2(VOT)S_{time,cost}}}$
(\#eq:corresponding t-statistic)
\end{equation}\]</span></p>
<p>The interpretation is the same as above except that the hypothesis refers to the equality of one parameter to the other parameter times an <em>a priori</em> fixed value. In this case, if it is concluded that the hypothesis is not rejected, the ratio constraint can be incorporated in the model by creating a new variable <span class="math inline">\(X_{time,\ cost} = X_{cost}+(VOT)X_{time}\)</span>.</p>
</div>
<div id="tests-of-entire-models" class="section level4" number="5.7.3.3">
<h4><span class="header-section-number">5.7.3.3</span> Tests of Entire Models</h4>
<p>The t-statistic is used to test the hypothesis that a single parameter is equal to some pre-selected value or that there is a linear relationship between a pair of parameters. Sometimes, we wish to test multiple hypotheses simultaneously. This is done by formulating a test statistic which can be used to compare two models provided that one is a restricted version of the other; that is, the restricted model can be obtained by imposing restrictions (setting some parameters to zero, setting pairs of parameters equal to one another and so on) on parameters in the unrestricted model. This test statistic can then be used for any case when one or more restrictions are imposed on a model to obtain another model.</p>
<p>If all the restrictions that distinguish between the restricted and unrestricted models are valid, one would expect the difference in log-likelihood values (at convergence) of the restricted and unrestricted models to be small. If some or all the restrictions are invalid, the difference in log-likelihood values of the restricted and unrestricted models will be “sufficiently” large to reject the hypotheses. This underlying logic is the basis for the likelihood ratio test. The test statistic is:</p>
<p><span class="math display" id="eq:LLratiotest">\[\begin{equation}
\displaystyle -2\times[LL_{R}-LL_{U}]
\tag{5.13}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(LL_{R}\)</span> is the log-likelihood of the restricted model, and
<span class="math inline">\(LL_{U}\)</span> is the log-likelihood of the unrestricted model.</p>
<p>This test-statistic is chi-squared distributed. Example chi-squared distributions are shown in Figure 5.4. As with the test for individual parameters, the critical value for determining if the statistic is “sufficiently large” to reject the null hypothesis depends on the level of confidence desired by the model developer. It is also influenced by the number of restrictions<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a> between the models. Table 5-5 shows the chi-squared values for selected confidence levels and for different numbers of restrictions.</p>
<p>Figure 5.5 illustrates the 90% and 95% confidence thresholds on the chi-squared distribution for five degrees of freedom. The critical chi-square values increase with the desired confidence level and the number of restrictions.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="estimation-chapter.html#cb36-1" aria-hidden="true" tabindex="-1"></a>these_colors <span class="ot">=</span> wesanderson<span class="sc">::</span><span class="fu">wes_palette</span>(<span class="st">&quot;Darjeeling1&quot;</span>)</span>
<span id="cb36-2"><a href="estimation-chapter.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb36-3"><a href="estimation-chapter.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="fl">0.01</span>),</span>
<span id="cb36-4"><a href="estimation-chapter.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">5</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">dchisq</span>(x, <span class="dv">5</span>),</span>
<span id="cb36-5"><a href="estimation-chapter.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">10</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">dchisq</span>(x, <span class="dv">10</span>),</span>
<span id="cb36-6"><a href="estimation-chapter.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">15</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">dchisq</span>(x, <span class="dv">15</span>),</span>
<span id="cb36-7"><a href="estimation-chapter.html#cb36-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb36-8"><a href="estimation-chapter.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="st">&quot;Degrees of Freedom&quot;</span>, <span class="st">&quot;Chi-Squared&quot;</span>, <span class="sc">-</span>x) <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="estimation-chapter.html#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> <span class="st">`</span><span class="at">Chi-Squared</span><span class="st">`</span>, <span class="at">color =</span> <span class="st">`</span><span class="at">Degrees of Freedom</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb36-10"><a href="estimation-chapter.html#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb36-11"><a href="estimation-chapter.html#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> these_colors) <span class="sc">+</span> </span>
<span id="cb36-12"><a href="estimation-chapter.html#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span id="fig:chisqdistrib51015"></span>
<img src="05-mnl-estimation_files/figure-html/chisqdistrib51015-1.png" alt="Chi-Squared Distribution for 5, 10, and 15 Degrees of Freedom" width="672" />
<p class="caption">
Figure 5.2: Chi-Squared Distribution for 5, 10, and 15 Degrees of Freedom
</p>
</div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="estimation-chapter.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)), <span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="estimation-chapter.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dchisq, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">df =</span> <span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="estimation-chapter.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x =</span> <span class="st">&quot;Test Values&quot;</span>, <span class="at">y =</span> <span class="st">&quot;PDF&quot;</span>) <span class="sc">+</span> </span>
<span id="cb37-4"><a href="estimation-chapter.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span id="fig:chisq-critdiagram"></span>
<img src="05-mnl-estimation_files/figure-html/chisq-critdiagram-1.png" alt="Chi-Squared Distribution for 5 Degrees of Freedom Showing 90% and 95% confidence Thresholds" width="672" />
<p class="caption">
Figure 5.3: Chi-Squared Distribution for 5 Degrees of Freedom Showing 90% and 95% confidence Thresholds
</p>
</div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table5-5">Table 5.6: </span>Critical Chi-Squared (<span class="math inline">\(\chi^2\)</span>) Values for Selected Confidence Levels by Number of Restrictions
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="9">
<div style="border-bottom: 1px solid #111111; margin-bottom: -1px; ">
Number of Restrictions
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
Level.of.Conf.
</th>
<th style="text-align:center;">
X1
</th>
<th style="text-align:center;">
X2
</th>
<th style="text-align:center;">
X3
</th>
<th style="text-align:center;">
X4
</th>
<th style="text-align:center;">
X5
</th>
<th style="text-align:center;">
X7
</th>
<th style="text-align:center;">
X10
</th>
<th style="text-align:center;">
X12
</th>
<th style="text-align:center;">
X15
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
90%
</td>
<td style="text-align:center;">
2.71
</td>
<td style="text-align:center;">
4.61
</td>
<td style="text-align:center;">
6.25
</td>
<td style="text-align:center;">
7.78
</td>
<td style="text-align:center;">
9.24
</td>
<td style="text-align:center;">
12.01
</td>
<td style="text-align:center;">
15.99
</td>
<td style="text-align:center;">
18.54
</td>
<td style="text-align:center;">
22.31
</td>
</tr>
<tr>
<td style="text-align:center;">
95%
</td>
<td style="text-align:center;">
3.84
</td>
<td style="text-align:center;">
5.99
</td>
<td style="text-align:center;">
7.81
</td>
<td style="text-align:center;">
9.49
</td>
<td style="text-align:center;">
11.07
</td>
<td style="text-align:center;">
14.06
</td>
<td style="text-align:center;">
18.31
</td>
<td style="text-align:center;">
21.02
</td>
<td style="text-align:center;">
25.00
</td>
</tr>
<tr>
<td style="text-align:center;">
99%
</td>
<td style="text-align:center;">
6.63
</td>
<td style="text-align:center;">
9.21
</td>
<td style="text-align:center;">
11.34
</td>
<td style="text-align:center;">
13.28
</td>
<td style="text-align:center;">
15.09
</td>
<td style="text-align:center;">
18.48
</td>
<td style="text-align:center;">
23.21
</td>
<td style="text-align:center;">
26.21
</td>
<td style="text-align:center;">
30.58
</td>
</tr>
<tr>
<td style="text-align:center;">
99.5%
</td>
<td style="text-align:center;">
7.88
</td>
<td style="text-align:center;">
10.60
</td>
<td style="text-align:center;">
12.84
</td>
<td style="text-align:center;">
14.86
</td>
<td style="text-align:center;">
16.75
</td>
<td style="text-align:center;">
20.28
</td>
<td style="text-align:center;">
25.19
</td>
<td style="text-align:center;">
28.30
</td>
<td style="text-align:center;">
32.80
</td>
</tr>
<tr>
<td style="text-align:center;">
99.9%
</td>
<td style="text-align:center;">
10.83
</td>
<td style="text-align:center;">
13.82
</td>
<td style="text-align:center;">
16.27
</td>
<td style="text-align:center;">
18.47
</td>
<td style="text-align:center;">
20.51
</td>
<td style="text-align:center;">
24.32
</td>
<td style="text-align:center;">
29.59
</td>
<td style="text-align:center;">
32.91
</td>
<td style="text-align:center;">
37.70
</td>
</tr>
</tbody>
</table>
<p>The likelihood ratio test can be applied to test null hypotheses involving the exclusion of groups of variables from the model. Table 5-6 illustrates the tests of two hypotheses describing restriction on some or all the parameters in the San Francisco Bay Area commuter mode choice model. The first hypothesis is that all the parameters are equal to zero. The formal statement of the null hypothesis in this case, is:</p>
<p><span class="math display" id="eq:nullhypothesiscase">\[\begin{equation}
\displaystyle H_{0,a}:\beta_{Travel\ Time} = \beta_{Travel\ Cost} = 0, \\
\beta_{SR2} = \beta_{SR3} = \beta_{TR} = \beta_{WK} = \beta_{BK} = 0, and \\
\beta_{Income-SR2} = \beta_{Income-SR3} = \beta_{Income-Transit} = \beta_{Income-Bike} = \beta_{Income-Walk} = 0
\tag{5.14}
\end{equation}\]</span></p>
<p>This test is not very useful because we almost always reject the null hypothesis that all coefficients are zero. A somewhat more useful null hypothesis is that the variables in the initial model specification provide no additional information in addition to the market share information represented by the alternative specific constants. The restrictions for this null hypothesis are:</p>
<p><span class="math display" id="eq:restrictionsnullhypothesiscase">\[\begin{equation}
\displaystyle H_{0,b}:\beta_{Travel\ Time} = \beta_{Travel\ Cost} = 0, and \\
\beta_{Income-SR2} = \beta_{Income-SR3+} = \beta_{Income-Transit}, and \\
\beta_{Income-Bike} = \beta_{Income-Walk} = 0
\tag{5.15}
\end{equation}\]</span></p>
<p>The log-likelihood values needed to test each of these hypotheses are reported in Table <a href="estimation-chapter.html#tab:basic-estimation-table">5.4</a>. In each case, we include the log-likelihood of the restricted and unrestricted models, the calculated chi-square value and the number of restrictions or degrees of freedom as shown in Table 5-6. The confidence or significance of the rejection of the null hypothesis in each case can be obtained by referring to Table 5-5, more extensive published tables or software (most spreadsheet programs) that calculates the precise level of confidence/significance associated with each test result.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table5-6">Table 5.7: </span>Likelihood Ratio Test for Hypothesis <span class="math inline">\(H_{0,a}\)</span> and <span class="math inline">\(H_{0,b}\)</span>
</caption>
<thead>
<tr>
<th style="text-align:center;">
Hypothesis
</th>
<th style="text-align:center;">
LL_U
</th>
<th style="text-align:center;">
LL_R
</th>
<th style="text-align:center;">
test_stat
</th>
<th style="text-align:center;">
df
</th>
<th style="text-align:center;">
Crtical Chi-Squared at 99.9% Conf.
</th>
<th style="text-align:center;">
P-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
<span class="math inline">\(H_{0a}\)</span>
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-7309.601
</td>
<td style="text-align:center;">
7366.829
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
32.90949
</td>
<td style="text-align:center;">
0
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(H_{0b}\)</span>
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-4132.916
</td>
<td style="text-align:center;">
1013.459
</td>
<td style="text-align:center;">
7
</td>
<td style="text-align:center;">
24.32189
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
<p>These two applications of the likelihood ratio test correspond to situations where the null hypothesis leads to a highly restrictive model. These cases are not very interesting since the real value of the likelihood ratio test is in testing null hypotheses which are not so extreme. The log-likelihood ratio test can be applied to test null hypotheses involving the exclusion of selected groups of variables from the model. We consider two such hypotheses. The first is that the time and cost variables have no impact on the mode choice decision, that is,</p>
<p><span class="math inline">\(H_{0,C} : \beta_{Travel Time} = \beta_{Travel Cost} = 0\)</span></p>
<p>The second is that income has no effect on the travel mode choice; that is</p>
<p><span class="math inline">\(H_{0,D} : \beta_{Income-SR2} = \beta_{Income-SR3+} = \beta_{Income-Transit} = \beta_{Income-Bike} = \beta_{Income-Walk} = 0\)</span></p>
<p>The restricted models that reflect each of these hypotheses and the corresponding unrestricted model are reported in Table 5-7 along with their log-likelihood values.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="estimation-chapter.html#cb38-1" aria-hidden="true" tabindex="-1"></a>sf_mlogit_basemodels <span class="ot">&lt;-</span> sf_mlogit</span>
<span id="cb38-2"><a href="estimation-chapter.html#cb38-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb38-3"><a href="estimation-chapter.html#cb38-3" aria-hidden="true" tabindex="-1"></a>base_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span>  tvtt <span class="sc">+</span> cost<span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit_basemodels)</span>
<span id="cb38-4"><a href="estimation-chapter.html#cb38-4" aria-hidden="true" tabindex="-1"></a>incomebase_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> <span class="dv">1</span> <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit_basemodels)</span>
<span id="cb38-5"><a href="estimation-chapter.html#cb38-5" aria-hidden="true" tabindex="-1"></a>timecostbase_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> tvtt <span class="sc">+</span> cost, <span class="at">data =</span> sf_mlogit_basemodels)</span>
<span id="cb38-6"><a href="estimation-chapter.html#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="estimation-chapter.html#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="estimation-chapter.html#cb38-8" aria-hidden="true" tabindex="-1"></a>base_estimation <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb38-9"><a href="estimation-chapter.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model&quot;</span> <span class="ot">=</span> base_model,</span>
<span id="cb38-10"><a href="estimation-chapter.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model without Time and Cost Variables&quot;</span> <span class="ot">=</span> incomebase_model,</span>
<span id="cb38-11"><a href="estimation-chapter.html#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model without Income Variables&quot;</span> <span class="ot">=</span> timecostbase_model</span>
<span id="cb38-12"><a href="estimation-chapter.html#cb38-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-13"><a href="estimation-chapter.html#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="estimation-chapter.html#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb38-15"><a href="estimation-chapter.html#cb38-15" aria-hidden="true" tabindex="-1"></a>  base_estimation, <span class="at">fmt =</span> <span class="st">&quot;%.4f&quot;</span>,</span>
<span id="cb38-16"><a href="estimation-chapter.html#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Estimation Results for Base Model and its Restricted Versions&quot;</span></span>
<span id="cb38-17"><a href="estimation-chapter.html#cb38-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:base_models table 5-7)Estimation Results for Base Model and its Restricted Versions
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Base Model
</th>
<th style="text-align:center;">
Base Model without Time and Cost Variables
</th>
<th style="text-align:center;">
Base Model without Income Variables
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 2
</td>
<td style="text-align:center;">
-2.1780
</td>
<td style="text-align:center;">
-2.1098
</td>
<td style="text-align:center;">
-2.3083
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1046)
</td>
<td style="text-align:center;">
(0.0993)
</td>
<td style="text-align:center;">
(0.0547)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 3++
</td>
<td style="text-align:center;">
-3.7251
</td>
<td style="text-align:center;">
-3.4722
</td>
<td style="text-align:center;">
-3.7024
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1777)
</td>
<td style="text-align:center;">
(0.1656)
</td>
<td style="text-align:center;">
(0.0929)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Transit
</td>
<td style="text-align:center;">
-0.6709
</td>
<td style="text-align:center;">
-1.8198
</td>
<td style="text-align:center;">
-0.9739
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1326)
</td>
<td style="text-align:center;">
(0.1023)
</td>
<td style="text-align:center;">
(0.0885)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Bike
</td>
<td style="text-align:center;">
-2.3763
</td>
<td style="text-align:center;">
-2.6721
</td>
<td style="text-align:center;">
-3.0705
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.3045)
</td>
<td style="text-align:center;">
(0.3028)
</td>
<td style="text-align:center;">
(0.1539)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Walk
</td>
<td style="text-align:center;">
-0.2068
</td>
<td style="text-align:center;">
-1.5985
</td>
<td style="text-align:center;">
-0.7040
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1941)
</td>
<td style="text-align:center;">
(0.1636)
</td>
<td style="text-align:center;">
(0.1293)
</td>
</tr>
<tr>
<td style="text-align:left;">
tvtt
</td>
<td style="text-align:center;">
-0.0513
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.0514
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0031)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.0031)
</td>
</tr>
<tr>
<td style="text-align:left;">
cost
</td>
<td style="text-align:center;">
-0.0049
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.0049
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0002)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.0002)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 2
</td>
<td style="text-align:center;">
-0.0022
</td>
<td style="text-align:center;">
-0.0004
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0016)
</td>
<td style="text-align:center;">
(0.0015)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 3++
</td>
<td style="text-align:center;">
0.0004
</td>
<td style="text-align:center;">
0.0030
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0025)
</td>
<td style="text-align:center;">
(0.0024)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Transit
</td>
<td style="text-align:center;">
-0.0053
</td>
<td style="text-align:center;">
-0.0022
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0018)
</td>
<td style="text-align:center;">
(0.0016)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Bike
</td>
<td style="text-align:center;">
-0.0128
</td>
<td style="text-align:center;">
-0.0122
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0053)
</td>
<td style="text-align:center;">
(0.0054)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Walk
</td>
<td style="text-align:center;">
-0.0097
</td>
<td style="text-align:center;">
-0.0089
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0030)
</td>
<td style="text-align:center;">
(0.0030)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:center;">
7276.4
</td>
<td style="text-align:center;">
8267.2
</td>
<td style="text-align:center;">
7289.2
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-4123.615
</td>
<td style="text-align:center;">
-3637.579
</td>
</tr>
<tr>
<td style="text-align:left;">
rho2
</td>
<td style="text-align:center;">
0.2534
</td>
<td style="text-align:center;">
0.1510
</td>
<td style="text-align:center;">
0.2511
</td>
</tr>
<tr>
<td style="text-align:left;">
rho20
</td>
<td style="text-align:center;">
0.5976
</td>
<td style="text-align:center;">
0.5424
</td>
<td style="text-align:center;">
0.5963
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="estimation-chapter.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This code recreates table 5-7 in the text with the correct coefficients and log likelihood</span></span>
<span id="cb39-2"><a href="estimation-chapter.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#However, the output does not have the correct rho-square values, and is missing a number of separate statistics</span></span></code></pre></div>
<p>The statistical test of the hypothesis that time and cost have no effect has a chi-square value of</p>
<p><span class="math display" id="eq:ChisqTimeCostZero">\[\begin{equation}
\chi^2 = -2(-4123.6-(-3626.2))=994.8
\tag{5.16}
\end{equation}\]</span></p>
<p>with two degrees of freedom (two parameters constrained to zero). The critical <span class="math inline">\(\chi^2\)</span> with two degrees of freedom at 99.9% confidence (or 0.001 level of significance) is 13.82. Similarly, the statistical test of the hypothesis that income has no effect on mode choice has a chi-square value of</p>
<p><span class="math display" id="eq:chisqIncomeZero">\[\begin{equation}
\chi^2 = -2(-3637.6-(-3626.2))=22.8
\tag{5.17}
\end{equation}\]</span></p>
<p>with five degrees of freedom (five income parameters are constrained to zero). The critical <span class="math inline">\(\chi^2\)</span> with five degrees of freedom at 99.9% confidence level (or 0.001 level of significance) is 20.51. Thus, both null hypotheses can be rejected at very high levels; that is, neither time and cost nor the income variables should be excluded from the model. The log-likelihood ratio tests for both the above hypotheses are summarized in Table 5-8.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="estimation-chapter.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb40-2"><a href="estimation-chapter.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Hypothesis =</span> <span class="fu">c</span>(<span class="st">&quot;$H_{0c}$&quot;</span>,<span class="st">&quot;$H_{0d}$&quot;</span>),</span>
<span id="cb40-3"><a href="estimation-chapter.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">LL_U =</span> <span class="fu">rep</span>(base_model<span class="sc">$</span>logLik, <span class="dv">2</span>),</span>
<span id="cb40-4"><a href="estimation-chapter.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">LL_R =</span> <span class="fu">c</span>(incomebase_model<span class="sc">$</span>logLik, timecostbase_model<span class="sc">$</span>logLik)</span>
<span id="cb40-5"><a href="estimation-chapter.html#cb40-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="estimation-chapter.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-7"><a href="estimation-chapter.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">test_stat =</span> <span class="sc">-</span><span class="dv">2</span> <span class="sc">*</span> (LL_R <span class="sc">-</span> LL_U),</span>
<span id="cb40-8"><a href="estimation-chapter.html#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">df =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>),</span>
<span id="cb40-9"><a href="estimation-chapter.html#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Crtical Chi-Squared at 99.9% Conf.&quot;</span> <span class="ot">=</span> <span class="fu">qchisq</span>(<span class="fl">0.999</span>, df),</span>
<span id="cb40-10"><a href="estimation-chapter.html#cb40-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;P-value&quot;</span> <span class="ot">=</span> <span class="fu">pchisq</span>(test_stat, df, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb40-11"><a href="estimation-chapter.html#cb40-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-12"><a href="estimation-chapter.html#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">&#39;c&#39;</span>, <span class="at">caption =</span> <span class="st">&quot;Likelihood Ratio Test for Hypothesis $H_{0,c}$ and $H_{0,d}$&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-13"><a href="estimation-chapter.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table5-8">Table 5.8: </span>Likelihood Ratio Test for Hypothesis <span class="math inline">\(H_{0,c}\)</span> and <span class="math inline">\(H_{0,d}\)</span>
</caption>
<thead>
<tr>
<th style="text-align:center;">
Hypothesis
</th>
<th style="text-align:center;">
LL_U
</th>
<th style="text-align:center;">
LL_R
</th>
<th style="text-align:center;">
test_stat
</th>
<th style="text-align:center;">
df
</th>
<th style="text-align:center;">
Crtical Chi-Squared at 99.9% Conf.
</th>
<th style="text-align:center;">
P-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
<span class="math inline">\(H_{0c}\)</span>
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-4123.615
</td>
<td style="text-align:center;">
994.8581
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
13.81551
</td>
<td style="text-align:center;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(H_{0d}\)</span>
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-3637.579
</td>
<td style="text-align:center;">
22.7845
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
20.51501
</td>
<td style="text-align:center;">
0.0003711
</td>
</tr>
</tbody>
</table>
</div>
<div id="non-nested-hypothesis-tests" class="section level4" number="5.7.3.4">
<h4><span class="header-section-number">5.7.3.4</span> Non-nested Hypothesis Tests</h4>
<p>The likelihood ratio test can only be applied to compare models which differ due to the application of restrictions to one of the models. Such cases are referred to as nested hypothesis tests. However, there are important cases when the rival models do not have this type of restricted – unrestricted relationship. For example, we might like to compare the base model to an alternative specification in which the variable cost divided by income is used to replace cost. This reflects the expectation that the importance of cost diminishes with increasing income. This analysis can be performed by using the non-nested hypothesis test proposed by (<span class="citation"><a href="#ref-horowitz1986" role="doc-biblioref">J. L. Horowitz and Lerman</a> (<a href="#ref-horowitz1986" role="doc-biblioref">1986</a>)</span>, 1982). The non-nested hypothesis test uses the adjusted likelihood ratio index, <span class="math inline">\(\overline{\rho}^2\)</span>, to test the hypothesis that the model with the lower <span class="math inline">\(\overline{\rho}^2\)</span> value is the true model.<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a> In this test, the null hypothesis that the model with the lower value is the true model is rejected at the significance level determined by the following equation:<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
<p><span class="math display" id="eq:significancelevel">\[\begin{equation}
Significance Level = \Phi \left[-{(2(\overline{\rho}^2_H-\overline{\rho}^2_L) \times LL(0) + (K_H - K_L))}^{1/2}\right]
\tag{5.18}
\end{equation}\]</span></p>
<p>where</p>
<ul>
<li><span class="math inline">\(\overline{\rho}^2_L\)</span> is the adjusted likelihood ratio index for the model with the lower value,</li>
<li><span class="math inline">\(\overline{\rho}^2_H\)</span> is the adjusted likelihood ratio index for the model with the higher value</li>
<li><span class="math inline">\(K_H\)</span>,<span class="math inline">\(K_L\)</span> are the numbers of parameters in models H and L, respectively, and</li>
<li><span class="math inline">\(\Phi\)</span> is the standard normal cumulative distribution function.</li>
</ul>
<p>We illustrate the non-nested hypothesis test by applying it to compare the base model with alternative specifications that replace the cost variable with cost divided by income or cost divided by ln(income). The estimation results for all three models are presented in Table 5-9. Since the model using cost not adjusted for income has the best goodness of fit (highest <span class="math inline">\(\overline{\rho}^2\)</span>), the null hypotheses for these tests is that the model with cost by income variable or the model with cost by ln(income) is the true model. higher <span class="math inline">\(\overline{\rho}^2\)</span>. Since all the models have the same number of parameters, the term (K_H-K_L) drops out, and the equation for the test of the cost by income model being true is:</p>
<p><span class="math display" id="eq:testCostbyIncome">\[\begin{align*}
\Phi \left[\left(-{(2(\overline{\rho}^2_H-\overline{\rho}^2_L) \times LL(0) )}^{1/2}\right)\right] &amp;= \Phi \left[-{(-2(0.5023-0.4897)(-7309.6))}^{1/2}\right] \\
&amp;= \Phi [-13.58] \ll 0.001
\tag{5.19}
\end{align*}\]</span></p>
<p>The corresponding test for the cost by ln(income) being true is:</p>
<p><span class="math display" id="eq:testCostbylnIncome">\[\begin{align*}
\Phi \left[\left(-{(2(\overline{\rho}^2_H-\overline{\rho}^2_L) \times LL(0) )}^{1/2}\right)\right] &amp;= \Phi \left[-{(-2(0.5023-05015)(-7309.6))}^{1/2}\right] \\
&amp;= \Phi [-3.420] &lt; 0.001
\tag{5.20}
\end{align*}\]</span></p>
<p>The above result implies that the null hypotheses that the models with cost by income variable or cost by ln(income) are true are rejected at a significance level greater than 0.001. However, the significance of rejection is much lower for the cost by ln(income) model and many analysts would adopt that specification on the grounds that it is conceptually more appropriate. This specification suggests that the value of money declines with income but the rate of decline diminishes at higher levels of income.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="estimation-chapter.html#cb41-1" aria-hidden="true" tabindex="-1"></a>sf_mlogit_costinc <span class="ot">&lt;-</span> sf_mlogit <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="estimation-chapter.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="estimation-chapter.html#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">costbyinc =</span> cost <span class="sc">/</span> hhinc,</span>
<span id="cb41-4"><a href="estimation-chapter.html#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">costbylninc =</span> cost <span class="sc">/</span> <span class="fu">log</span>(hhinc)</span>
<span id="cb41-5"><a href="estimation-chapter.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-6"><a href="estimation-chapter.html#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="estimation-chapter.html#cb41-7" aria-hidden="true" tabindex="-1"></a>base_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span>  tvtt <span class="sc">+</span> cost <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit_costinc)</span>
<span id="cb41-8"><a href="estimation-chapter.html#cb41-8" aria-hidden="true" tabindex="-1"></a>income_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> tvtt <span class="sc">+</span> costbyinc <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit_costinc)</span>
<span id="cb41-9"><a href="estimation-chapter.html#cb41-9" aria-hidden="true" tabindex="-1"></a>lnincome_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> tvtt <span class="sc">+</span> costbylninc <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit_costinc)</span>
<span id="cb41-10"><a href="estimation-chapter.html#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="estimation-chapter.html#cb41-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-12"><a href="estimation-chapter.html#cb41-12" aria-hidden="true" tabindex="-1"></a>income_estimation <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb41-13"><a href="estimation-chapter.html#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model&quot;</span> <span class="ot">=</span> base_model,</span>
<span id="cb41-14"><a href="estimation-chapter.html#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Model With Cost By Cost/Income&quot;</span> <span class="ot">=</span> income_model,</span>
<span id="cb41-15"><a href="estimation-chapter.html#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Model With Cost By ln(Income)&quot;</span> <span class="ot">=</span> lnincome_model</span>
<span id="cb41-16"><a href="estimation-chapter.html#cb41-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-17"><a href="estimation-chapter.html#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="estimation-chapter.html#cb41-18" aria-hidden="true" tabindex="-1"></a>gm <span class="ot">&lt;-</span> modelsummary<span class="sc">::</span>gof_map</span>
<span id="cb41-19"><a href="estimation-chapter.html#cb41-19" aria-hidden="true" tabindex="-1"></a>gm<span class="sc">$</span>omit <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb41-20"><a href="estimation-chapter.html#cb41-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-21"><a href="estimation-chapter.html#cb41-21" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb41-22"><a href="estimation-chapter.html#cb41-22" aria-hidden="true" tabindex="-1"></a>  income_estimation,</span>
<span id="cb41-23"><a href="estimation-chapter.html#cb41-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Models with Cost vs. Cost/Income and Cost/Ln(Income)&quot;</span></span>
<span id="cb41-24"><a href="estimation-chapter.html#cb41-24" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:cost_models)Models with Cost vs. Cost/Income and Cost/Ln(Income)
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Base Model
</th>
<th style="text-align:center;">
Model With Cost By Cost/Income
</th>
<th style="text-align:center;">
Model With Cost By ln(Income)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 2
</td>
<td style="text-align:center;">
-2.178
</td>
<td style="text-align:center;">
-2.377
</td>
<td style="text-align:center;">
-2.282
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.105)
</td>
<td style="text-align:center;">
(0.106)
</td>
<td style="text-align:center;">
(0.105)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 3++
</td>
<td style="text-align:center;">
-3.725
</td>
<td style="text-align:center;">
-4.080
</td>
<td style="text-align:center;">
-3.906
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.178)
</td>
<td style="text-align:center;">
(0.175)
</td>
<td style="text-align:center;">
(0.177)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Transit
</td>
<td style="text-align:center;">
-0.671
</td>
<td style="text-align:center;">
-0.758
</td>
<td style="text-align:center;">
-0.731
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.133)
</td>
<td style="text-align:center;">
(0.132)
</td>
<td style="text-align:center;">
(0.133)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Bike
</td>
<td style="text-align:center;">
-2.376
</td>
<td style="text-align:center;">
-2.771
</td>
<td style="text-align:center;">
-2.556
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.305)
</td>
<td style="text-align:center;">
(0.296)
</td>
<td style="text-align:center;">
(0.301)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Walk
</td>
<td style="text-align:center;">
-0.207
</td>
<td style="text-align:center;">
-0.598
</td>
<td style="text-align:center;">
-0.369
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.194)
</td>
<td style="text-align:center;">
(0.195)
</td>
<td style="text-align:center;">
(0.194)
</td>
</tr>
<tr>
<td style="text-align:left;">
tvtt
</td>
<td style="text-align:center;">
-0.051
</td>
<td style="text-align:center;">
-0.051
</td>
<td style="text-align:center;">
-0.051
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
(0.003)
</td>
</tr>
<tr>
<td style="text-align:left;">
cost
</td>
<td style="text-align:center;">
-0.005
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.000)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 2
</td>
<td style="text-align:center;">
-0.002
</td>
<td style="text-align:center;">
0.003
</td>
<td style="text-align:center;">
0.000
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.002)
</td>
<td style="text-align:center;">
(0.002)
</td>
<td style="text-align:center;">
(0.002)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 3++
</td>
<td style="text-align:center;">
0.000
</td>
<td style="text-align:center;">
0.010
</td>
<td style="text-align:center;">
0.003
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
(0.002)
</td>
<td style="text-align:center;">
(0.002)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Transit
</td>
<td style="text-align:center;">
-0.005
</td>
<td style="text-align:center;">
-0.001
</td>
<td style="text-align:center;">
-0.004
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.002)
</td>
<td style="text-align:center;">
(0.002)
</td>
<td style="text-align:center;">
(0.002)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Bike
</td>
<td style="text-align:center;">
-0.013
</td>
<td style="text-align:center;">
-0.004
</td>
<td style="text-align:center;">
-0.010
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.005)
</td>
<td style="text-align:center;">
(0.005)
</td>
<td style="text-align:center;">
(0.005)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Walk
</td>
<td style="text-align:center;">
-0.010
</td>
<td style="text-align:center;">
-0.002
</td>
<td style="text-align:center;">
-0.007
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
(0.003)
</td>
<td style="text-align:center;">
(0.003)
</td>
</tr>
<tr>
<td style="text-align:left;">
costbyinc
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.169
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.010)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
costbylninc
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.019
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.001)
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:center;">
7276.4
</td>
<td style="text-align:center;">
7460.8
</td>
<td style="text-align:center;">
7282.0
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-3718.390
</td>
<td style="text-align:center;">
-3629.000
</td>
</tr>
<tr>
<td style="text-align:left;">
rho2
</td>
<td style="text-align:center;">
0.253
</td>
<td style="text-align:center;">
0.234
</td>
<td style="text-align:center;">
0.253
</td>
</tr>
<tr>
<td style="text-align:left;">
rho20
</td>
<td style="text-align:center;">
0.598
</td>
<td style="text-align:center;">
0.587
</td>
<td style="text-align:center;">
0.597
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="estimation-value-of-time" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Value of Time</h2>
<div id="value-of-time-for-linear-utility-function" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Value of Time for Linear Utility Function</h3>
<p>The value of time, as described in Section 5.7.1.3, is calculated as the ratio of the parameter for time over the parameter for cost. This ratio assumes that the utility function is linear in both time and cost and that neither value is interacted with any other variables. That is, when the time and cost portion of the utility function is</p>
<p><span class="math display" id="eq:utilityvot">\[\begin{equation}
V_i = ... + \beta_{TVT}TVT_i + \beta_{Cost}Cost_i + ...
\tag{5.21}
\end{equation}\]</span></p>
<p>the value of time is given by</p>
<p><span class="math display" id="eq:VoT">\[\begin{equation}
VofT = \beta_{TVT} \Huge/ \normalsize \beta_{Cost}
\tag{5.22}
\end{equation}\]</span></p>
<p>The units of time value are obtained from the units of the variables used to measure time and cost. In the Base Model in Table 5.9, the units are minutes and cents. Thus the value of time in cents per minute implied by this model is -0.0513/-0.0049 = 10.5 cents per minute. This can be modified to $ per hour by multiply by 0.6 = (1/100 $ per cent)/(1/60 hour per minute).</p>
<p>However, in general, the value of time is equal to the ratio between the derivative of utility with respect to time and the derivative of utility with respect to cost. That is</p>
<p><span class="math display" id="eq:VoTderivratio">\[\begin{equation}
VofT = \frac{\partial{V_i}}{\partial{Time_i}} \Huge/ \normalsize \frac{\partial{V_i}}{\partial{Cost_i}}
\tag{5.23}
\end{equation}\]</span></p>
<p>In the case described in Equation 5.24, this produces the ratio in Equation 5.25. However, this more general formulation allows us to infer the value of time for a variety of special cases in addition to the linear utility case described above.</p>
</div>
<div id="section5-8-2" class="section level3" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Value of Time when Cost is Interacted with another Variable</h3>
<p>This approach can be applied to any case including when either time or cost is interacted with another variable, usually a variable describing the decision maker or the decision context. For example, if cost is divided by income<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a> as in the second model reported in Table 5-9, on the basis that a unit of cost is proportionally less important with increasing income, the utility expression becomes</p>
<p><span class="math display" id="eq:utilityvotcostinc">\[\begin{equation}
V_{it} = ... + \beta_{TVT}TVT_{it} + \beta_{CostInc}\frac{Cost_{it}}{Income_t} + ...
\tag{5.24}
\end{equation}\]</span></p>
<p>and the value of time becomes</p>
<p><span class="math display" id="eq:VoTcostinc">\[\begin{equation}
VofT = \frac{\partial{V_i}}{\partial{Time_i}} \Huge/ \normalsize {\frac{\partial{V_i}}{\partial{Cost_i}}} = {\beta_{TVT}} \Huge/ \normalsize {\beta_{CostInc}} \Huge/ \normalsize {Income_i}
\tag{5.25}
\end{equation}\]</span></p>
<p>which can be converted to</p>
<p><span class="math display" id="eq:VoTcostincconvert">\[\begin{equation}
VofT = \frac{\frac{\beta_{TVT}}{\beta_{Cost}}}{Income($1000/year)}{cents/minute}
\tag{5.26}
\end{equation}\]</span></p>
<p>or</p>
<p><span class="math display">\[\begin{equation}
VofT = \frac{0.6 \times \frac{\beta_{TVT}}{\beta_{Cost}}}{Income($1000/year)}{$/hour}
\end{equation}\]</span></p>
<p>Similarly, the value of time for the third specification in Table 5-9 is</p>
<p><span class="math display">\[\begin{equation}
VofT = \frac{0.6 \times \frac{\beta_{TVT}}{\beta_{Cost}}}{ln[Income($1000/year)]}{$/hour}
\end{equation}\]</span></p>
<p>The value of time implied by each of these formulations is illustrated in Table 5-10 and Figure 5.6 by showing the values of time for different income levels. In each case, the values of travel time appear to be quite low. This will be addressed in model specification refinement (Section 6.2.6).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="estimation-chapter.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb42-2"><a href="estimation-chapter.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">AnnualIncome =</span> <span class="fu">c</span>(<span class="dv">25000</span>, <span class="dv">50000</span>, <span class="dv">75000</span>, <span class="dv">100000</span>, <span class="dv">125000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="estimation-chapter.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HourlyWage=</span> AnnualIncome<span class="sc">/</span><span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="estimation-chapter.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">linear =</span> <span class="fu">c</span>(<span class="fl">6.26</span>, <span class="fl">6.26</span>, <span class="fl">6.26</span>, <span class="fl">6.26</span>, <span class="fl">6.26</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="estimation-chapter.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CostIncome =</span> <span class="fu">c</span>(<span class="fl">4.53</span>, <span class="fl">9.07</span>, <span class="fl">13.60</span>, <span class="fl">18.13</span>, <span class="fl">21.94</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="estimation-chapter.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CostLn =</span> <span class="fu">c</span>(<span class="fl">5.18</span>, <span class="fl">6.29</span>, <span class="fl">6.95</span>, <span class="fl">7.41</span>, <span class="fl">7.72</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="estimation-chapter.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>( <span class="at">caption =</span> <span class="st">&quot;Value of Time vs. Income&quot;</span>,</span>
<span id="cb42-8"><a href="estimation-chapter.html#cb42-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Annual Income&quot;</span>, <span class="st">&quot;Hourly Wage&quot;</span>, <span class="st">&quot;Linear&quot;</span>, <span class="st">&quot;Cost/Income&quot;</span>, <span class="st">&quot;Cost/LN(Inc.)&quot;</span>))</span></code></pre></div>
<table>
<caption>
<span id="tab:valueoftimevsincome">Table 5.9: </span>Value of Time vs. Income
</caption>
<thead>
<tr>
<th style="text-align:right;">
Annual Income
</th>
<th style="text-align:right;">
Hourly Wage
</th>
<th style="text-align:right;">
Linear
</th>
<th style="text-align:right;">
Cost/Income
</th>
<th style="text-align:right;">
Cost/LN(Inc.)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
25000
</td>
<td style="text-align:right;">
12.5
</td>
<td style="text-align:right;">
6.26
</td>
<td style="text-align:right;">
4.53
</td>
<td style="text-align:right;">
5.18
</td>
</tr>
<tr>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
25.0
</td>
<td style="text-align:right;">
6.26
</td>
<td style="text-align:right;">
9.07
</td>
<td style="text-align:right;">
6.29
</td>
</tr>
<tr>
<td style="text-align:right;">
75000
</td>
<td style="text-align:right;">
37.5
</td>
<td style="text-align:right;">
6.26
</td>
<td style="text-align:right;">
13.60
</td>
<td style="text-align:right;">
6.95
</td>
</tr>
<tr>
<td style="text-align:right;">
100000
</td>
<td style="text-align:right;">
50.0
</td>
<td style="text-align:right;">
6.26
</td>
<td style="text-align:right;">
18.13
</td>
<td style="text-align:right;">
7.41
</td>
</tr>
<tr>
<td style="text-align:right;">
125000
</td>
<td style="text-align:right;">
62.5
</td>
<td style="text-align:right;">
6.26
</td>
<td style="text-align:right;">
21.94
</td>
<td style="text-align:right;">
7.72
</td>
</tr>
</tbody>
</table>
<p><img src="05-mnl-estimation_files/figure-html/figure%205-6-1.png" width="672" /></p>
<p>Another approach that can be used in this case is to relate the value of travel directly to the wage rate by assuming that the working year consists of 2000 hours or 120,000 minutes and recognizing that $1000 dollars is equivalent to 100,000 cents. This gives us</p>
<p><span class="math display" id="eq:VoTlncostinc">\[\begin{equation}
Units_{VofT} = cents \Huge/ \normalsize minute \Huge/ \normalsize $1000 \Huge/ \normalsize year
\tag{5.27}
\end{equation}\]</span>
<span class="math display">\[\begin{equation}
 = cents \Huge/ \normalsize minute \Huge/ \normalsize 100,000~cents \Huge/ \normalsize 120,000~minutes
\end{equation}\]</span>
<span class="math display">\[\begin{equation}
 = 1.2
\end{equation}\]</span></p>
<p>That is, there are no units but a simple factor of 1.2. This is interpreted as the value by which the ratio of the parameters should be multiplied to get the value of travel time as a fraction of the wage rate. In the cost by income model in Table 5-9 Models with Cost vs. Cost/Income and Cost/Ln(Income), this becomes</p>
<p><span class="math display" id="eq:TVTfracofwagerate">\[\begin{equation}
VofT = \beta_{TVT} \Huge/ \normalsize \beta_{CostInc} \times 1.2 = \frac{-0.0512}{-0.1692} \times 1.2 = 0.363~Wage~Rate
\tag{5.28}
\end{equation}\]</span></p>
<p>which, as before, is quite low. However, as shown in Figure 5.6 and discussed in Section 5.7.3.4, this specification and the related specification for cost by ln(income) have the advantage that the value of time is differentiated across households with different income.</p>
</div>
<div id="value-of-time-for-time-or-cost-transformation" class="section level3" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> Value of Time for Time or Cost Transformation</h3>
<p>If time or cost is transformed, it becomes necessary to explicitly take the derivative of utility with respect to both time and cost. For example, if time enters the utility function using the natural log transformation, to suggest that the utility effect of increasing time decreases with time, the utility function becomes</p>
<p><span class="math display" id="eq:utilitycosttransform">\[\begin{equation}
V_{it} = ... + \beta_{ln(TVT)}ln(TVT_{it}) + \beta_{Cost}Cost_{it} + ...
\tag{5.29}
\end{equation}\]</span></p>
<p>and the value of time becomes</p>
<p><span class="math display" id="eq:VoTcosttransformalt">\[\begin{equation}
VofT = \frac{\partial{V_{it}}}{\partial{Time_{it}}} \Huge/ \normalsize \frac{\partial{V_{it}}}{\partial{Cost_{it}}} = \beta_{ln(TVT)} \Huge/ \normalsize TVT_{it} \Huge/ \normalsize \beta_{Cost} = \frac{\beta_{ln(TVT)}}{\beta_{Cost}} \times \frac{1}{TVT_{it}}
\tag{5.30}
\end{equation}\]</span></p>
<p>Similarly, if cost is entered as the natural log of cost, the value of time becomes</p>
<p><span class="math display" id="eq:VoTcosttransformlncost">\[\begin{equation}
VofT = \frac{\partial{V_{it}}}{\partial{Time_{it}}} \Huge/ \normalsize \frac{\partial{V_{it}}}{\partial{Cost_{it}}} = \beta_{TVT} \Huge/ \normalsize \beta_{ln(Cost)} \Huge/ \normalsize Cost_{it} = \frac{\beta_{TVT}}{\beta_{ln(Cost)}} \times Cost_{it}
\tag{5.31}
\end{equation}\]</span></p>
<p>which can be reported in a table for selected values of time or plotted in a graph of Value of Time as a function of TVT or Cost, as appropriate (see below). Models using each of these formulations are estimated and reported, along with the Base Model in Table 5-11. The goodness of fit is substantially improved by using ln(time), which is generally expected, but is worse when using ln(cost), for which there is no conceptual basis.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="estimation-chapter.html#cb43-1" aria-hidden="true" tabindex="-1"></a>base_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span>  tvtt <span class="sc">+</span> cost <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit)</span>
<span id="cb43-2"><a href="estimation-chapter.html#cb43-2" aria-hidden="true" tabindex="-1"></a>lntravaltime_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> cost <span class="sc">+</span> <span class="fu">log</span>(tvtt) <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit)</span>
<span id="cb43-3"><a href="estimation-chapter.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># lots of variables have zero cost, and log(0) = -Inf. To keep this model estimable, we can</span></span>
<span id="cb43-4"><a href="estimation-chapter.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># add 0.01 dollars to all alternatives, because log function is monotonically increasing.</span></span>
<span id="cb43-5"><a href="estimation-chapter.html#cb43-5" aria-hidden="true" tabindex="-1"></a>lntravelcost_model <span class="ot">&lt;-</span> <span class="fu">mlogit</span>(chosen <span class="sc">~</span> tvtt <span class="sc">+</span> <span class="fu">I</span>(<span class="fu">log</span>(cost <span class="sc">+</span> <span class="fl">0.01</span>)) <span class="sc">|</span> hhinc, <span class="at">data =</span> sf_mlogit)</span>
<span id="cb43-6"><a href="estimation-chapter.html#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="estimation-chapter.html#cb43-7" aria-hidden="true" tabindex="-1"></a>transformations_estimation <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb43-8"><a href="estimation-chapter.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Base Model&quot;</span> <span class="ot">=</span> base_model,</span>
<span id="cb43-9"><a href="estimation-chapter.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Model With Log of Travel Time&quot;</span> <span class="ot">=</span> lntravaltime_model,</span>
<span id="cb43-10"><a href="estimation-chapter.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Model With Log of Travel Cost&quot;</span> <span class="ot">=</span> lntravelcost_model</span>
<span id="cb43-11"><a href="estimation-chapter.html#cb43-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-12"><a href="estimation-chapter.html#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="estimation-chapter.html#cb43-13" aria-hidden="true" tabindex="-1"></a>gm <span class="ot">&lt;-</span> modelsummary<span class="sc">::</span>gof_map</span>
<span id="cb43-14"><a href="estimation-chapter.html#cb43-14" aria-hidden="true" tabindex="-1"></a>gm<span class="sc">$</span>omit <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb43-15"><a href="estimation-chapter.html#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="estimation-chapter.html#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb43-17"><a href="estimation-chapter.html#cb43-17" aria-hidden="true" tabindex="-1"></a>  transformations_estimation,<span class="at">fmt =</span> <span class="st">&quot;%.4f&quot;</span>,</span>
<span id="cb43-18"><a href="estimation-chapter.html#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&quot;Base Model and Log Transformations&quot;</span></span>
<span id="cb43-19"><a href="estimation-chapter.html#cb43-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:Table5-11">Table 5.10: </span>Base Model and Log Transformations
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
Base Model
</th>
<th style="text-align:center;">
Model With Log of Travel Time
</th>
<th style="text-align:center;">
Model With Log of Travel Cost
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 2
</td>
<td style="text-align:center;">
-2.1780
</td>
<td style="text-align:center;">
-1.7457
</td>
<td style="text-align:center;">
-2.4748
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1046)
</td>
<td style="text-align:center;">
(0.1091)
</td>
<td style="text-align:center;">
(0.1072)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Share ride 3++
</td>
<td style="text-align:center;">
-3.7251
</td>
<td style="text-align:center;">
-3.1395
</td>
<td style="text-align:center;">
-4.3121
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1777)
</td>
<td style="text-align:center;">
(0.1805)
</td>
<td style="text-align:center;">
(0.1782)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Transit
</td>
<td style="text-align:center;">
-0.6709
</td>
<td style="text-align:center;">
0.0788
</td>
<td style="text-align:center;">
0.0194
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1326)
</td>
<td style="text-align:center;">
(0.1509)
</td>
<td style="text-align:center;">
(0.1371)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Bike
</td>
<td style="text-align:center;">
-2.3763
</td>
<td style="text-align:center;">
-1.6413
</td>
<td style="text-align:center;">
-10.4405
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.3045)
</td>
<td style="text-align:center;">
(0.3092)
</td>
<td style="text-align:center;">
(0.5238)
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept) × Walk
</td>
<td style="text-align:center;">
-0.2068
</td>
<td style="text-align:center;">
1.1878
</td>
<td style="text-align:center;">
-7.7790
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.1941)
</td>
<td style="text-align:center;">
(0.2324)
</td>
<td style="text-align:center;">
(0.4402)
</td>
</tr>
<tr>
<td style="text-align:left;">
tvtt
</td>
<td style="text-align:center;">
-0.0513
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.0602
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0031)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.0032)
</td>
</tr>
<tr>
<td style="text-align:left;">
cost
</td>
<td style="text-align:center;">
-0.0049
</td>
<td style="text-align:center;">
-0.0034
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0002)
</td>
<td style="text-align:center;">
(0.0002)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 2
</td>
<td style="text-align:center;">
-0.0022
</td>
<td style="text-align:center;">
-0.0026
</td>
<td style="text-align:center;">
-0.0009
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0016)
</td>
<td style="text-align:center;">
(0.0016)
</td>
<td style="text-align:center;">
(0.0015)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Share ride 3++
</td>
<td style="text-align:center;">
0.0004
</td>
<td style="text-align:center;">
0.0001
</td>
<td style="text-align:center;">
0.0025
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0025)
</td>
<td style="text-align:center;">
(0.0025)
</td>
<td style="text-align:center;">
(0.0024)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Transit
</td>
<td style="text-align:center;">
-0.0053
</td>
<td style="text-align:center;">
-0.0066
</td>
<td style="text-align:center;">
-0.0051
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0018)
</td>
<td style="text-align:center;">
(0.0019)
</td>
<td style="text-align:center;">
(0.0018)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Bike
</td>
<td style="text-align:center;">
-0.0128
</td>
<td style="text-align:center;">
-0.0125
</td>
<td style="text-align:center;">
-0.0131
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0053)
</td>
<td style="text-align:center;">
(0.0053)
</td>
<td style="text-align:center;">
(0.0054)
</td>
</tr>
<tr>
<td style="text-align:left;">
hhinc × Walk
</td>
<td style="text-align:center;">
-0.0097
</td>
<td style="text-align:center;">
-0.0090
</td>
<td style="text-align:center;">
-0.0089
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
(0.0030)
</td>
<td style="text-align:center;">
(0.0031)
</td>
<td style="text-align:center;">
(0.0031)
</td>
</tr>
<tr>
<td style="text-align:left;">
log(tvtt)
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-2.3992
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.1244)
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
I(log(cost + 0.01))
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-1.0150
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
(0.0502)
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
<td style="text-align:center;">
5029
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:center;">
7276.4
</td>
<td style="text-align:center;">
7205.0
</td>
<td style="text-align:center;">
7383.4
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:center;">
-3626.186
</td>
<td style="text-align:center;">
-3590.502
</td>
<td style="text-align:center;">
-3679.717
</td>
</tr>
<tr>
<td style="text-align:left;">
rho2
</td>
<td style="text-align:center;">
0.2534
</td>
<td style="text-align:center;">
0.2608
</td>
<td style="text-align:center;">
0.2424
</td>
</tr>
<tr>
<td style="text-align:left;">
rho20
</td>
<td style="text-align:center;">
0.5976
</td>
<td style="text-align:center;">
0.6015
</td>
<td style="text-align:center;">
0.5916
</td>
</tr>
</tbody>
</table>
<p>The implications for value of time of these different formulations are shown in Table 5-12 and Table 5-13 Value of Time for Log of Cost Model and also in Figure 5.7 and Figure 5.8.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="estimation-chapter.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in a log of time model, the value of time is a function of the trip time.</span></span>
<span id="cb44-2"><a href="estimation-chapter.html#cb44-2" aria-hidden="true" tabindex="-1"></a>ln_vot <span class="ot">&lt;-</span> <span class="cf">function</span>(model, ttime){</span>
<span id="cb44-3"><a href="estimation-chapter.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  ValueCentsMin <span class="ot">=</span> <span class="fu">coef</span>(model)[<span class="st">&quot;log(tvtt)&quot;</span>] <span class="sc">/</span> (<span class="fu">coef</span>(model)[<span class="st">&quot;cost&quot;</span>] <span class="sc">*</span> ttime)</span>
<span id="cb44-4"><a href="estimation-chapter.html#cb44-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-5"><a href="estimation-chapter.html#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="estimation-chapter.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb44-7"><a href="estimation-chapter.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">triptime =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">90</span>, <span class="dv">120</span>),</span>
<span id="cb44-8"><a href="estimation-chapter.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">vot =</span> <span class="fu">ln_vot</span>(lntravaltime_model, triptime)</span>
<span id="cb44-9"><a href="estimation-chapter.html#cb44-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb44-10"><a href="estimation-chapter.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vot_dhr =</span> vot <span class="sc">*</span> <span class="fl">0.6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-11"><a href="estimation-chapter.html#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">digits =</span> <span class="dv">2</span>, </span>
<span id="cb44-12"><a href="estimation-chapter.html#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">&quot;Value of Time for Log of Time Model&quot;</span>, </span>
<span id="cb44-13"><a href="estimation-chapter.html#cb44-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;Trip Time (min)&quot;</span>, <span class="st">&quot;Value of Time (cents/min)&quot;</span>, <span class="st">&quot;Value of Time ($/hr)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-14"><a href="estimation-chapter.html#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code></pre></div>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table5-12">Table 5.11: </span>Value of Time for Log of Time Model
</caption>
<thead>
<tr>
<th style="text-align:right;">
Trip Time (min)
</th>
<th style="text-align:right;">
Value of Time (cents/min)
</th>
<th style="text-align:right;">
Value of Time ($/hr)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
139.76
</td>
<td style="text-align:right;">
83.86
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
46.59
</td>
<td style="text-align:right;">
27.95
</td>
</tr>
<tr>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
23.29
</td>
<td style="text-align:right;">
13.98
</td>
</tr>
<tr>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
11.65
</td>
<td style="text-align:right;">
6.99
</td>
</tr>
<tr>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
7.76
</td>
<td style="text-align:right;">
4.66
</td>
</tr>
<tr>
<td style="text-align:right;">
120
</td>
<td style="text-align:right;">
5.82
</td>
<td style="text-align:right;">
3.49
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="estimation-chapter.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb45-2"><a href="estimation-chapter.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">triptime =</span> <span class="fu">seq</span>(<span class="dv">5</span>, <span class="dv">120</span>, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb45-3"><a href="estimation-chapter.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vot =</span> <span class="fl">0.6</span> <span class="sc">*</span> <span class="fu">ln_vot</span>(lntravaltime_model, triptime)</span>
<span id="cb45-4"><a href="estimation-chapter.html#cb45-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="estimation-chapter.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> vot, <span class="at">x =</span> triptime)) <span class="sc">+</span></span>
<span id="cb45-6"><a href="estimation-chapter.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb45-7"><a href="estimation-chapter.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">dollar_format</span>())<span class="sc">+</span></span>
<span id="cb45-8"><a href="estimation-chapter.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( <span class="at">x=</span> <span class="st">&quot;Time of Trip (min)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Value of Time ($/hr)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb45-9"><a href="estimation-chapter.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span id="fig:figure5-7"></span>
<img src="05-mnl-estimation_files/figure-html/figure5-7-1.png" alt="Value of time for log of time model as a function of trip time." width="672" />
<p class="caption">
Figure 5.4: Value of time for log of time model as a function of trip time.
</p>
</div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:table5-13">Table 5.12: </span>Value of Time for Log of Cost Model
</caption>
<thead>
<tr>
<th style="text-align:center;">
Trip cost
</th>
<th style="text-align:center;">
Value of time ($/hr)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
$0.25
</td>
<td style="text-align:center;">
0.85
</td>
</tr>
<tr>
<td style="text-align:center;">
$0.50
</td>
<td style="text-align:center;">
$1.71
</td>
</tr>
<tr>
<td style="text-align:center;">
$1.00
</td>
<td style="text-align:center;">
$3.42
</td>
</tr>
<tr>
<td style="text-align:center;">
$2.00
</td>
<td style="text-align:center;">
$6.83
</td>
</tr>
<tr>
<td style="text-align:center;">
$5.00
</td>
<td style="text-align:center;">
$17.09
</td>
</tr>
</tbody>
</table>
<p><img src="05-mnl-estimation_files/figure-html/figure%205-8-1.png" width="672" /></p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-benakivalerman1985" class="csl-entry">
Ben-Akiva, M., and S. R. Lerman. 1985. <em>Discrete Choice Analysis: Theory and Application to Travel Demand</em>. Cambridge: The MIT Press.
</div>
<div id="ref-borschsupan1987" class="csl-entry">
Börsch-Supan, A. 1987. <em>Econometric Analysis of Discrete Choice</em>. 296th ed. Springer-Verlag, Berlin, Germany: Lecture Notes in Economics; Mathematical Systems.
</div>
<div id="ref-horowitz1986" class="csl-entry">
J. L. Horowitz, F. S. Koppelman, and S. R. Lerman. 1986. <em>A Self-Instructing Course in Disaggregate Mode Choice Modeling</em>. Final Report. Washington, D.C.: University Research; Training Program.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="13">
<li id="fn13"><p>The data formats required vary for different programs and are documented in the relevant software.<a href="estimation-chapter.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>When the same behavior is observed repeatedly for a case, the chosen alternative will be replaced by the
frequency with which each alternative is chosen.<a href="estimation-chapter.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p>The estimation reported by the Metropolitan Transportation Commission (Travel Demand Models for the San Francisco Bay Area
(BAYCAST-90): Technical Summary, Metropolitan Transportation Commission, Oakland, California, June 1997) includes drive alone, sharedride
with 2 people, shared ride with 3 or more people, transit with walk access, transit with auto access, bike and walk.<a href="estimation-chapter.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>Essentially identical estimation results are produced by these and a variety of other commercially available and programmer developed
estimation procedures. However, some software applies simplifying assumptions that are not appropriate in every case. See Appendix A for
additional information.<a href="estimation-chapter.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>Commonly, the name is selected to match the corresponding variable name.<a href="estimation-chapter.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>The zero model can be estimated with constants included but restricted to zero, the constants model can be
estimated with constants included and not restricted.<a href="estimation-chapter.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>If all the reported constants are negative, the alternative with the most positive parameter is drive alone at zero.<a href="estimation-chapter.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p>The perfect model “predicts” a probability of one for the chosen mode for each and every case so the contribution of each case to the loglikelihood function is ln(1) = 0.<a href="estimation-chapter.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p>Confidence levels commonly used are in the range of 90% to 99%.<a href="estimation-chapter.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p>Generally, it is good policy to retain or eliminate full sets of constants and alternative specific variables unless
there is a good reason to do otherwise until all other variables have been selected.<a href="estimation-chapter.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>The number of restrictions is the number of constraints imposed on the unrestricted model to obtain the restricted model. If three variables are deleted from the unrestricted mode; that is, their parameters are restricted to zero; the number of restrictions is three.<a href="estimation-chapter.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>The alternative test, that the model with the higher <span class="math inline">\(\overline{\rho}^2\)</span> value is the true model, cannot be undertaken as an inferior model can never be used to reject a superior model.<a href="estimation-chapter.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p>Modified from Ben-Akiva and Lerman, Chapter 7, 1985<a href="estimation-chapter.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>The value of income commonly used is the total household income since that value is most commonly collected in surveys. This raises a variety of potential problems in interpretation as the hourly wage rate based on household income is only the wage rate of the worker in a single worker household and does not readily apply to any worker in multi-worker household to non-workers. This issue is not explicitly addressed in this manual but raises more general issues of model interpretation and use of the results.<a href="estimation-chapter.html#fnref26" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-multinomial-logit-model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="specification-chapter.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
